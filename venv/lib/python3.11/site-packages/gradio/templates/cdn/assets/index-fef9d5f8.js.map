{"version":3,"mappings":"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","names":["insert","target","svg","anchor","append","path","path0","path1","line0","line1","circle0","circle1","__awaiter","this","thisArg","_arguments","P","generator","adopt","value","resolve","reject","fulfilled","step","e","rejected","result","decode","audioData","sampleRate","audioCtx","normalize","channelData","firstChannel","n","length","max","absN","channel","i","createBuffer","duration","Decoder","fetchBlob","url","progressCallback","requestInit","_a","_b","response","reader","contentLength","receivedLength","processChunk","done","percentage","Fetcher","EventEmitter","event","listener","options","unsubscribeOnce","eventName","args","Player","callback","src","blob","newSrc","element","time","volume","muted","rate","preservePitch","sinkId","makeDraggable","onDrag","onStart","onEnd","threshold","unsub","down","startX","startY","isDragging","move","x","y","left","top","click","up","Renderer","audioElement","parent","div","shadow","container","getClickPosition","rect","relativeX","relativeY","scrollLeft","scrollWidth","clientWidth","endX","delay","_","__","newParent","delayMs","context","color","canvasElement","gradient","colorStopPercentage","index","offset","ctx","vScale","topChannel","bottomChannel","width","height","halfHeight","pixelRatio","barWidth","barGap","barRadius","barIndexScale","rectFn","prevX","maxTop","maxBottom","topBarHeight","bottomBarHeight","barHeight","magnitudeTop","magnitudeBottom","_options","drawChannel","hScale","h","start","end","canvasContainer","progressContainer","canvas","progressCanvas","progressCtx","len","scale","viewportWidth","totalBarWidth","viewportLen","draw","headDelay","tailDelay","renderHead","fromIndex","toIndex","renderTail","parentWidth","useParentWidth","channels","oldCursorPosition","newCursortPosition","minPxPerSec","progress","isPlaying","progressWidth","center","minScroll","minDiff","percents","Timer","WebAudioPlayer","audioContext","arrayBuffer","audioBuffer","deviceId","defaultOptions","WaveSurfer","media","currentTime","debounce","plugin","unsubscribe","p","onProgress","maxLength","precision","maxChannels","peaks","data","sampleSize","sample","isInteractive","seconds","t","s","r","o","a","l","d","u","c","s$1","audioBufferToWav","numOfChan","buffer","view","writeString","string","j","process_audio","numberOfChannels","trimmedLength","startOffset","trimmedAudioBuffer","trimmedData","skipAudio","waveform","amount","getSkipRewindAmount","audioDuration","skip_length","button","button0","button1","create_if_block_2","create_if_block","attr","button1_aria_label_value","button3","button3_aria_label_value","div2","span","div0","button2","div1","current","dirty","$$props","i18n","playing","showRedo","interactive","handle_trim_audio","mode","handle_reset_value","waveform_settings","trimDuration","playbackSpeeds","playbackSpeed","trimRegion","activeRegion","leftRegionHandle","rightRegionHandle","activeHandle","addTrimRegion","$$invalidate","trimAudio","clearRegions","region","toggleTrimmingMode","adjustRegionHandles","handle","key","newStart","newEnd","click_handler_2","RegionsPlugin","shadowRoot","onMount","if_block0","create_if_block_1","div4","div3","time0","time1","t_value","set_data","label","autoplay","dispatch","dispatch_blob","timeRef","durationRef","formatTime","minutes","paddedSeconds","create_waveform","decodedData","trimmedBlob","load_audio","resolve_wasm_src","resolved_src","$$value","createEventDispatcher","Download","a_href_value","a_download_value","iconbutton_changes","Music","show_label","show_download_button","show_share_button","uploadToHuggingFace","option","option_value_value","t0_value","t2_value","t4_value","t7_value","button1_class_value","button4","select","t0","t2","t4","t7","record","micDevices","recordButton","pauseButton","resumeButton","stopButton","stopButtonPaused","click_handler","click_handler_3","click_handler_4","tempDevices","RecordPlugin","devices","device","err","create_if_block_4","create_if_block_3","if_block1","if_block2","micWaveform","recordingWaveform","recordedAudio","interval","timing","start_interval","format_time","create_mic_waveform","recorder","create_recording_waveform","recording","trimmedAudio","waveformCanvas","array_buffer","audio_buffer","microphone","t1_value","span1","t1","span2","paused_recording","stop","waveformRecord","blocklabel_changes","STREAM_TIMESLICE","NUM_HEADER_BYTES","root","sources","pending","streaming","dragging","active_source","header","pending_stream","submit_pending_stream_on_pending_end","inited","audio_chunks","module_promises","get_modules","blobs","_audio_blob","val","prepare_files","upload","onDestroy","prepare_audio","stream","MediaRecorder","register","connect","handle_chunk","payload","blobParts","clear","handle_load","detail","edit_handler","block_changes","uploadtext_changes","interactiveaudio_changes","staticaudio_changes","elem_id","elem_classes","visible","proxy_url","min_width","loading_status","waveform_options","gradio","old_value","_value","initial_value","normalise_file"],"sources":["../../../../js/icons/src/Backward.svelte","../../../../js/icons/src/Forward.svelte","../../../../js/icons/src/Microphone.svelte","../../../../js/icons/src/Music.svelte","../../../../node_modules/.pnpm/wavesurfer.js@7.4.2/node_modules/wavesurfer.js/dist/decoder.js","../../../../node_modules/.pnpm/wavesurfer.js@7.4.2/node_modules/wavesurfer.js/dist/fetcher.js","../../../../node_modules/.pnpm/wavesurfer.js@7.4.2/node_modules/wavesurfer.js/dist/event-emitter.js","../../../../node_modules/.pnpm/wavesurfer.js@7.4.2/node_modules/wavesurfer.js/dist/player.js","../../../../node_modules/.pnpm/wavesurfer.js@7.4.2/node_modules/wavesurfer.js/dist/draggable.js","../../../../node_modules/.pnpm/wavesurfer.js@7.4.2/node_modules/wavesurfer.js/dist/renderer.js","../../../../node_modules/.pnpm/wavesurfer.js@7.4.2/node_modules/wavesurfer.js/dist/timer.js","../../../../node_modules/.pnpm/wavesurfer.js@7.4.2/node_modules/wavesurfer.js/dist/webaudio.js","../../../../node_modules/.pnpm/wavesurfer.js@7.4.2/node_modules/wavesurfer.js/dist/wavesurfer.js","../../../../node_modules/.pnpm/wavesurfer.js@7.4.2/node_modules/wavesurfer.js/dist/plugins/regions.js","../../../../js/audio/shared/audioBufferToWav.ts","../../../../js/audio/shared/utils.ts","../../../../js/audio/shared/WaveformControls.svelte","../../../../js/audio/player/AudioPlayer.svelte","../../../../js/audio/static/StaticAudio.svelte","../../../../node_modules/.pnpm/wavesurfer.js@7.4.2/node_modules/wavesurfer.js/dist/plugins/record.js","../../../../js/audio/shared/WaveformRecordControls.svelte","../../../../js/audio/recorder/AudioRecorder.svelte","../../../../js/audio/streaming/StreamAudio.svelte","../../../../js/audio/interactive/InteractiveAudio.svelte","../../../../js/audio/Index.svelte"],"sourcesContent":["<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\twidth=\"24px\"\n\theight=\"24px\"\n\tfill=\"currentColor\"\n\tstroke-width=\"1.5\"\n\tviewBox=\"0 0 24 24\"\n\tcolor=\"currentColor\"\n\t><path\n\t\tstroke=\"currentColor\"\n\t\tstroke-width=\"1.5\"\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\td=\"M21.044 5.704a.6.6 0 0 1 .956.483v11.626a.6.6 0 0 1-.956.483l-7.889-5.813a.6.6 0 0 1 0-.966l7.89-5.813ZM10.044 5.704a.6.6 0 0 1 .956.483v11.626a.6.6 0 0 1-.956.483l-7.888-5.813a.6.6 0 0 1 0-.966l7.888-5.813Z\"\n\t/></svg\n>\n","<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\twidth=\"24px\"\n\theight=\"24px\"\n\tfill=\"currentColor\"\n\tstroke-width=\"1.5\"\n\tviewBox=\"0 0 24 24\"\n\tcolor=\"currentColor\"\n\t><path\n\t\tstroke=\"currentColor\"\n\t\tstroke-width=\"1.5\"\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\td=\"M2.956 5.704A.6.6 0 0 0 2 6.187v11.626a.6.6 0 0 0 .956.483l7.889-5.813a.6.6 0 0 0 0-.966l-7.89-5.813ZM13.956 5.704a.6.6 0 0 0-.956.483v11.626a.6.6 0 0 0 .956.483l7.889-5.813a.6.6 0 0 0 0-.966l-7.89-5.813Z\"\n\t/></svg\n>\n","<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\twidth=\"100%\"\n\theight=\"100%\"\n\tviewBox=\"0 0 24 24\"\n\tfill=\"none\"\n\tstroke=\"currentColor\"\n\tstroke-width=\"2\"\n\tstroke-linecap=\"round\"\n\tstroke-linejoin=\"round\"\n\tclass=\"feather feather-mic\"\n\t><path d=\"M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z\" /><path\n\t\td=\"M19 10v2a7 7 0 0 1-14 0v-2\"\n\t/><line x1=\"12\" y1=\"19\" x2=\"12\" y2=\"23\" /><line\n\t\tx1=\"8\"\n\t\ty1=\"23\"\n\t\tx2=\"16\"\n\t\ty2=\"23\"\n\t/></svg\n>\n","<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\twidth=\"100%\"\n\theight=\"100%\"\n\tviewBox=\"0 0 24 24\"\n\tfill=\"none\"\n\tstroke=\"currentColor\"\n\tstroke-width=\"1.5\"\n\tstroke-linecap=\"round\"\n\tstroke-linejoin=\"round\"\n\tclass=\"feather feather-music\"\n>\n\t<path d=\"M9 18V5l12-2v13\" />\n\t<circle cx=\"6\" cy=\"18\" r=\"3\" />\n\t<circle cx=\"18\" cy=\"16\" r=\"3\" />\n</svg>\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n/** Decode an array buffer into an audio buffer */\nfunction decode(audioData, sampleRate) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const audioCtx = new AudioContext({ sampleRate });\n        const decode = audioCtx.decodeAudioData(audioData);\n        return decode.finally(() => audioCtx.close());\n    });\n}\n/** Normalize peaks to -1..1 */\nfunction normalize(channelData) {\n    const firstChannel = channelData[0];\n    if (firstChannel.some((n) => n > 1 || n < -1)) {\n        const length = firstChannel.length;\n        let max = 0;\n        for (let i = 0; i < length; i++) {\n            const absN = Math.abs(firstChannel[i]);\n            if (absN > max)\n                max = absN;\n        }\n        for (const channel of channelData) {\n            for (let i = 0; i < length; i++) {\n                channel[i] /= max;\n            }\n        }\n    }\n    return channelData;\n}\n/** Create an audio buffer from pre-decoded audio data */\nfunction createBuffer(channelData, duration) {\n    // If a single array of numbers is passed, make it an array of arrays\n    if (typeof channelData[0] === 'number')\n        channelData = [channelData];\n    // Normalize to -1..1\n    normalize(channelData);\n    return {\n        duration,\n        length: channelData[0].length,\n        sampleRate: channelData[0].length / duration,\n        numberOfChannels: channelData.length,\n        getChannelData: (i) => channelData === null || channelData === void 0 ? void 0 : channelData[i],\n        copyFromChannel: AudioBuffer.prototype.copyFromChannel,\n        copyToChannel: AudioBuffer.prototype.copyToChannel,\n    };\n}\nconst Decoder = {\n    decode,\n    createBuffer,\n};\nexport default Decoder;\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nfunction fetchBlob(url, progressCallback, requestInit) {\n    var _a, _b;\n    return __awaiter(this, void 0, void 0, function* () {\n        // Fetch the resource\n        const response = yield fetch(url, requestInit);\n        // Read the data to track progress\n        {\n            const reader = (_a = response.clone().body) === null || _a === void 0 ? void 0 : _a.getReader();\n            const contentLength = Number((_b = response.headers) === null || _b === void 0 ? void 0 : _b.get('Content-Length'));\n            let receivedLength = 0;\n            // Process the data\n            const processChunk = (done, value) => __awaiter(this, void 0, void 0, function* () {\n                if (done)\n                    return;\n                // Add to the received length\n                receivedLength += (value === null || value === void 0 ? void 0 : value.length) || 0;\n                const percentage = Math.round((receivedLength / contentLength) * 100);\n                progressCallback(percentage);\n                // Continue reading data\n                return reader === null || reader === void 0 ? void 0 : reader.read().then(({ done, value }) => processChunk(done, value));\n            });\n            reader === null || reader === void 0 ? void 0 : reader.read().then(({ done, value }) => processChunk(done, value));\n        }\n        return response.blob();\n    });\n}\nconst Fetcher = {\n    fetchBlob,\n};\nexport default Fetcher;\n","/** A simple event emitter that can be used to listen to and emit events. */\nclass EventEmitter {\n    constructor() {\n        this.listeners = {};\n        /** Subscribe to an event. Returns an unsubscribe function. */\n        this.on = this.addEventListener;\n        /** Unsubscribe from an event */\n        this.un = this.removeEventListener;\n    }\n    /** Add an event listener */\n    addEventListener(event, listener, options) {\n        if (!this.listeners[event]) {\n            this.listeners[event] = new Set();\n        }\n        this.listeners[event].add(listener);\n        if (options === null || options === void 0 ? void 0 : options.once) {\n            const unsubscribeOnce = () => {\n                this.removeEventListener(event, unsubscribeOnce);\n                this.removeEventListener(event, listener);\n            };\n            this.addEventListener(event, unsubscribeOnce);\n            return unsubscribeOnce;\n        }\n        return () => this.removeEventListener(event, listener);\n    }\n    removeEventListener(event, listener) {\n        var _a;\n        (_a = this.listeners[event]) === null || _a === void 0 ? void 0 : _a.delete(listener);\n    }\n    /** Subscribe to an event only once */\n    once(event, listener) {\n        return this.on(event, listener, { once: true });\n    }\n    /** Clear all events */\n    unAll() {\n        this.listeners = {};\n    }\n    /** Emit an event */\n    emit(eventName, ...args) {\n        if (this.listeners[eventName]) {\n            this.listeners[eventName].forEach((listener) => listener(...args));\n        }\n    }\n}\nexport default EventEmitter;\n","import EventEmitter from './event-emitter.js';\nclass Player extends EventEmitter {\n    constructor(options) {\n        super();\n        this.isExternalMedia = false;\n        if (options.media) {\n            this.media = options.media;\n            this.isExternalMedia = true;\n        }\n        else {\n            this.media = document.createElement('audio');\n        }\n        // Controls\n        if (options.mediaControls) {\n            this.media.controls = true;\n        }\n        // Autoplay\n        if (options.autoplay) {\n            this.media.autoplay = true;\n        }\n        // Speed\n        if (options.playbackRate != null) {\n            this.onceMediaEvent('canplay', () => {\n                if (options.playbackRate != null) {\n                    this.media.playbackRate = options.playbackRate;\n                }\n            });\n        }\n    }\n    onMediaEvent(event, callback, options) {\n        this.media.addEventListener(event, callback, options);\n        return () => this.media.removeEventListener(event, callback);\n    }\n    onceMediaEvent(event, callback) {\n        return this.onMediaEvent(event, callback, { once: true });\n    }\n    getSrc() {\n        return this.media.currentSrc || this.media.src || '';\n    }\n    revokeSrc() {\n        const src = this.getSrc();\n        if (src.startsWith('blob:')) {\n            URL.revokeObjectURL(src);\n        }\n    }\n    setSrc(url, blob) {\n        const src = this.getSrc();\n        if (src === url)\n            return;\n        this.revokeSrc();\n        const newSrc = blob instanceof Blob ? URL.createObjectURL(blob) : url;\n        this.media.src = newSrc;\n        this.media.load();\n    }\n    destroy() {\n        this.media.pause();\n        if (this.isExternalMedia)\n            return;\n        this.media.remove();\n        this.revokeSrc();\n        this.media.src = '';\n        // Load resets the media element to its initial state\n        this.media.load();\n    }\n    setMediaElement(element) {\n        this.media = element;\n    }\n    /** Start playing the audio */\n    play() {\n        return this.media.play();\n    }\n    /** Pause the audio */\n    pause() {\n        this.media.pause();\n    }\n    /** Check if the audio is playing */\n    isPlaying() {\n        return !this.media.paused && !this.media.ended;\n    }\n    /** Jumpt to a specific time in the audio (in seconds) */\n    setTime(time) {\n        this.media.currentTime = time;\n    }\n    /** Get the duration of the audio in seconds */\n    getDuration() {\n        return this.media.duration;\n    }\n    /** Get the current audio position in seconds */\n    getCurrentTime() {\n        return this.media.currentTime;\n    }\n    /** Get the audio volume */\n    getVolume() {\n        return this.media.volume;\n    }\n    /** Set the audio volume */\n    setVolume(volume) {\n        this.media.volume = volume;\n    }\n    /** Get the audio muted state */\n    getMuted() {\n        return this.media.muted;\n    }\n    /** Mute or unmute the audio */\n    setMuted(muted) {\n        this.media.muted = muted;\n    }\n    /** Get the playback speed */\n    getPlaybackRate() {\n        return this.media.playbackRate;\n    }\n    /** Set the playback speed, pass an optional false to NOT preserve the pitch */\n    setPlaybackRate(rate, preservePitch) {\n        // preservePitch is true by default in most browsers\n        if (preservePitch != null) {\n            this.media.preservesPitch = preservePitch;\n        }\n        this.media.playbackRate = rate;\n    }\n    /** Get the HTML media element */\n    getMediaElement() {\n        return this.media;\n    }\n    /** Set a sink id to change the audio output device */\n    setSinkId(sinkId) {\n        // See https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement/setSinkId\n        const media = this.media;\n        return media.setSinkId(sinkId);\n    }\n}\nexport default Player;\n","export function makeDraggable(element, onDrag, onStart, onEnd, threshold = 5) {\n    let unsub = () => {\n        return;\n    };\n    if (!element)\n        return unsub;\n    const down = (e) => {\n        // Ignore the right mouse button\n        if (e.button === 2)\n            return;\n        e.preventDefault();\n        e.stopPropagation();\n        element.style.touchAction = 'none';\n        let startX = e.clientX;\n        let startY = e.clientY;\n        let isDragging = false;\n        const move = (e) => {\n            e.preventDefault();\n            e.stopPropagation();\n            const x = e.clientX;\n            const y = e.clientY;\n            if (isDragging || Math.abs(x - startX) >= threshold || Math.abs(y - startY) >= threshold) {\n                const { left, top } = element.getBoundingClientRect();\n                if (!isDragging) {\n                    isDragging = true;\n                    onStart === null || onStart === void 0 ? void 0 : onStart(startX - left, startY - top);\n                }\n                onDrag(x - startX, y - startY, x - left, y - top);\n                startX = x;\n                startY = y;\n            }\n        };\n        const click = (e) => {\n            if (isDragging) {\n                e.preventDefault();\n                e.stopPropagation();\n            }\n        };\n        const up = () => {\n            element.style.touchAction = '';\n            if (isDragging) {\n                onEnd === null || onEnd === void 0 ? void 0 : onEnd();\n            }\n            unsub();\n        };\n        document.addEventListener('pointermove', move);\n        document.addEventListener('pointerup', up);\n        document.addEventListener('pointerleave', up);\n        document.addEventListener('click', click, true);\n        unsub = () => {\n            document.removeEventListener('pointermove', move);\n            document.removeEventListener('pointerup', up);\n            document.removeEventListener('pointerleave', up);\n            setTimeout(() => {\n                document.removeEventListener('click', click, true);\n            }, 10);\n        };\n    };\n    element.addEventListener('pointerdown', down);\n    return () => {\n        unsub();\n        element.removeEventListener('pointerdown', down);\n    };\n}\n","import { makeDraggable } from './draggable.js';\nimport EventEmitter from './event-emitter.js';\nclass Renderer extends EventEmitter {\n    constructor(options, audioElement) {\n        super();\n        this.timeouts = [];\n        this.isScrolling = false;\n        this.audioData = null;\n        this.resizeObserver = null;\n        this.isDragging = false;\n        this.options = options;\n        const parent = this.parentFromOptionsContainer(options.container);\n        this.parent = parent;\n        const [div, shadow] = this.initHtml();\n        parent.appendChild(div);\n        this.container = div;\n        this.scrollContainer = shadow.querySelector('.scroll');\n        this.wrapper = shadow.querySelector('.wrapper');\n        this.canvasWrapper = shadow.querySelector('.canvases');\n        this.progressWrapper = shadow.querySelector('.progress');\n        this.cursor = shadow.querySelector('.cursor');\n        if (audioElement) {\n            shadow.appendChild(audioElement);\n        }\n        this.initEvents();\n    }\n    parentFromOptionsContainer(container) {\n        let parent;\n        if (typeof container === 'string') {\n            parent = document.querySelector(container);\n        }\n        else if (container instanceof HTMLElement) {\n            parent = container;\n        }\n        if (!parent) {\n            throw new Error('Container not found');\n        }\n        return parent;\n    }\n    initEvents() {\n        const getClickPosition = (e) => {\n            const rect = this.wrapper.getBoundingClientRect();\n            const x = e.clientX - rect.left;\n            const y = e.clientX - rect.left;\n            const relativeX = x / rect.width;\n            const relativeY = y / rect.height;\n            return [relativeX, relativeY];\n        };\n        // Add a click listener\n        this.wrapper.addEventListener('click', (e) => {\n            const [x, y] = getClickPosition(e);\n            this.emit('click', x, y);\n        });\n        // Add a double click listener\n        this.wrapper.addEventListener('dblclick', (e) => {\n            const [x, y] = getClickPosition(e);\n            this.emit('dblclick', x, y);\n        });\n        // Drag\n        if (this.options.dragToSeek) {\n            this.initDrag();\n        }\n        // Add a scroll listener\n        this.scrollContainer.addEventListener('scroll', () => {\n            const { scrollLeft, scrollWidth, clientWidth } = this.scrollContainer;\n            const startX = scrollLeft / scrollWidth;\n            const endX = (scrollLeft + clientWidth) / scrollWidth;\n            this.emit('scroll', startX, endX);\n        });\n        // Re-render the waveform on container resize\n        const delay = this.createDelay(100);\n        this.resizeObserver = new ResizeObserver(() => {\n            delay(() => this.reRender());\n        });\n        this.resizeObserver.observe(this.scrollContainer);\n    }\n    initDrag() {\n        makeDraggable(this.wrapper, \n        // On drag\n        (_, __, x) => {\n            this.emit('drag', Math.max(0, Math.min(1, x / this.wrapper.getBoundingClientRect().width)));\n        }, \n        // On start drag\n        () => (this.isDragging = true), \n        // On end drag\n        () => (this.isDragging = false));\n    }\n    getHeight() {\n        const defaultHeight = 128;\n        if (this.options.height == null)\n            return defaultHeight;\n        if (!isNaN(Number(this.options.height)))\n            return Number(this.options.height);\n        if (this.options.height === 'auto')\n            return this.parent.clientHeight || defaultHeight;\n        return defaultHeight;\n    }\n    initHtml() {\n        const div = document.createElement('div');\n        const shadow = div.attachShadow({ mode: 'open' });\n        shadow.innerHTML = `\n      <style>\n        :host {\n          user-select: none;\n          min-width: 1px;\n        }\n        :host audio {\n          display: block;\n          width: 100%;\n        }\n        :host .scroll {\n          overflow-x: auto;\n          overflow-y: hidden;\n          width: 100%;\n          position: relative;\n        }\n        :host .noScrollbar {\n          scrollbar-color: transparent;\n          scrollbar-width: none;\n        }\n        :host .noScrollbar::-webkit-scrollbar {\n          display: none;\n          -webkit-appearance: none;\n        }\n        :host .wrapper {\n          position: relative;\n          overflow: visible;\n          z-index: 2;\n        }\n        :host .canvases {\n          min-height: ${this.getHeight()}px;\n        }\n        :host .canvases > div {\n          position: relative;\n        }\n        :host canvas {\n          display: block;\n          position: absolute;\n          top: 0;\n          image-rendering: pixelated;\n        }\n        :host .progress {\n          pointer-events: none;\n          position: absolute;\n          z-index: 2;\n          top: 0;\n          left: 0;\n          width: 0;\n          height: 100%;\n          overflow: hidden;\n        }\n        :host .progress > div {\n          position: relative;\n        }\n        :host .cursor {\n          pointer-events: none;\n          position: absolute;\n          z-index: 5;\n          top: 0;\n          left: 0;\n          height: 100%;\n          border-radius: 2px;\n        }\n      </style>\n\n      <div class=\"scroll\" part=\"scroll\">\n        <div class=\"wrapper\" part=\"wrapper\">\n          <div class=\"canvases\"></div>\n          <div class=\"progress\" part=\"progress\"></div>\n          <div class=\"cursor\" part=\"cursor\"></div>\n        </div>\n      </div>\n    `;\n        return [div, shadow];\n    }\n    /** Wavesurfer itself calls this method. Do not call it manually. */\n    setOptions(options) {\n        if (this.options.container !== options.container) {\n            const newParent = this.parentFromOptionsContainer(options.container);\n            newParent.appendChild(this.container);\n            this.parent = newParent;\n        }\n        if (options.dragToSeek && !this.options.dragToSeek) {\n            this.initDrag();\n        }\n        this.options = options;\n        // Re-render the waveform\n        this.reRender();\n    }\n    getWrapper() {\n        return this.wrapper;\n    }\n    getScroll() {\n        return this.scrollContainer.scrollLeft;\n    }\n    destroy() {\n        var _a;\n        this.container.remove();\n        (_a = this.resizeObserver) === null || _a === void 0 ? void 0 : _a.disconnect();\n    }\n    createDelay(delayMs = 10) {\n        const context = {};\n        this.timeouts.push(context);\n        return (callback) => {\n            context.timeout && clearTimeout(context.timeout);\n            context.timeout = setTimeout(callback, delayMs);\n        };\n    }\n    // Convert array of color values to linear gradient\n    convertColorValues(color) {\n        if (!Array.isArray(color))\n            return color || '';\n        if (color.length < 2)\n            return color[0] || '';\n        const canvasElement = document.createElement('canvas');\n        const ctx = canvasElement.getContext('2d');\n        const gradient = ctx.createLinearGradient(0, 0, 0, canvasElement.height);\n        const colorStopPercentage = 1 / (color.length - 1);\n        color.forEach((color, index) => {\n            const offset = index * colorStopPercentage;\n            gradient.addColorStop(offset, color);\n        });\n        return gradient;\n    }\n    renderBarWaveform(channelData, options, ctx, vScale) {\n        const topChannel = channelData[0];\n        const bottomChannel = channelData[1] || channelData[0];\n        const length = topChannel.length;\n        const { width, height } = ctx.canvas;\n        const halfHeight = height / 2;\n        const pixelRatio = window.devicePixelRatio || 1;\n        const barWidth = options.barWidth ? options.barWidth * pixelRatio : 1;\n        const barGap = options.barGap ? options.barGap * pixelRatio : options.barWidth ? barWidth / 2 : 0;\n        const barRadius = options.barRadius || 0;\n        const barIndexScale = width / (barWidth + barGap) / length;\n        const rectFn = barRadius && 'roundRect' in ctx ? 'roundRect' : 'rect';\n        ctx.beginPath();\n        let prevX = 0;\n        let maxTop = 0;\n        let maxBottom = 0;\n        for (let i = 0; i <= length; i++) {\n            const x = Math.round(i * barIndexScale);\n            if (x > prevX) {\n                const topBarHeight = Math.round(maxTop * halfHeight * vScale);\n                const bottomBarHeight = Math.round(maxBottom * halfHeight * vScale);\n                const barHeight = topBarHeight + bottomBarHeight || 1;\n                // Vertical alignment\n                let y = halfHeight - topBarHeight;\n                if (options.barAlign === 'top') {\n                    y = 0;\n                }\n                else if (options.barAlign === 'bottom') {\n                    y = height - barHeight;\n                }\n                ctx[rectFn](prevX * (barWidth + barGap), y, barWidth, barHeight, barRadius);\n                prevX = x;\n                maxTop = 0;\n                maxBottom = 0;\n            }\n            const magnitudeTop = Math.abs(topChannel[i] || 0);\n            const magnitudeBottom = Math.abs(bottomChannel[i] || 0);\n            if (magnitudeTop > maxTop)\n                maxTop = magnitudeTop;\n            if (magnitudeBottom > maxBottom)\n                maxBottom = magnitudeBottom;\n        }\n        ctx.fill();\n        ctx.closePath();\n    }\n    renderLineWaveform(channelData, _options, ctx, vScale) {\n        const drawChannel = (index) => {\n            const channel = channelData[index] || channelData[0];\n            const length = channel.length;\n            const { height } = ctx.canvas;\n            const halfHeight = height / 2;\n            const hScale = ctx.canvas.width / length;\n            ctx.moveTo(0, halfHeight);\n            let prevX = 0;\n            let max = 0;\n            for (let i = 0; i <= length; i++) {\n                const x = Math.round(i * hScale);\n                if (x > prevX) {\n                    const h = Math.round(max * halfHeight * vScale) || 1;\n                    const y = halfHeight + h * (index === 0 ? -1 : 1);\n                    ctx.lineTo(prevX, y);\n                    prevX = x;\n                    max = 0;\n                }\n                const value = Math.abs(channel[i] || 0);\n                if (value > max)\n                    max = value;\n            }\n            ctx.lineTo(prevX, halfHeight);\n        };\n        ctx.beginPath();\n        drawChannel(0);\n        drawChannel(1);\n        ctx.fill();\n        ctx.closePath();\n    }\n    renderWaveform(channelData, options, ctx) {\n        ctx.fillStyle = this.convertColorValues(options.waveColor);\n        // Custom rendering function\n        if (options.renderFunction) {\n            options.renderFunction(channelData, ctx);\n            return;\n        }\n        // Vertical scaling\n        let vScale = options.barHeight || 1;\n        if (options.normalize) {\n            const max = Array.from(channelData[0]).reduce((max, value) => Math.max(max, Math.abs(value)), 0);\n            vScale = max ? 1 / max : 1;\n        }\n        // Render waveform as bars\n        if (options.barWidth || options.barGap || options.barAlign) {\n            this.renderBarWaveform(channelData, options, ctx, vScale);\n            return;\n        }\n        // Render waveform as a polyline\n        this.renderLineWaveform(channelData, options, ctx, vScale);\n    }\n    renderSingleCanvas(channelData, options, width, height, start, end, canvasContainer, progressContainer) {\n        const pixelRatio = window.devicePixelRatio || 1;\n        const canvas = document.createElement('canvas');\n        const length = channelData[0].length;\n        canvas.width = Math.round((width * (end - start)) / length);\n        canvas.height = height * pixelRatio;\n        canvas.style.width = `${Math.floor(canvas.width / pixelRatio)}px`;\n        canvas.style.height = `${height}px`;\n        canvas.style.left = `${Math.floor((start * width) / pixelRatio / length)}px`;\n        canvasContainer.appendChild(canvas);\n        const ctx = canvas.getContext('2d');\n        this.renderWaveform(channelData.map((channel) => channel.slice(start, end)), options, ctx);\n        // Draw a progress canvas\n        if (canvas.width > 0 && canvas.height > 0) {\n            const progressCanvas = canvas.cloneNode();\n            const progressCtx = progressCanvas.getContext('2d');\n            progressCtx.drawImage(canvas, 0, 0);\n            // Set the composition method to draw only where the waveform is drawn\n            progressCtx.globalCompositeOperation = 'source-in';\n            progressCtx.fillStyle = this.convertColorValues(options.progressColor);\n            // This rectangle acts as a mask thanks to the composition method\n            progressCtx.fillRect(0, 0, canvas.width, canvas.height);\n            progressContainer.appendChild(progressCanvas);\n        }\n    }\n    renderChannel(channelData, options, width) {\n        // A container for canvases\n        const canvasContainer = document.createElement('div');\n        const height = this.getHeight();\n        canvasContainer.style.height = `${height}px`;\n        this.canvasWrapper.style.minHeight = `${height}px`;\n        this.canvasWrapper.appendChild(canvasContainer);\n        // A container for progress canvases\n        const progressContainer = canvasContainer.cloneNode();\n        this.progressWrapper.appendChild(progressContainer);\n        // Determine the currently visible part of the waveform\n        const { scrollLeft, scrollWidth, clientWidth } = this.scrollContainer;\n        const len = channelData[0].length;\n        const scale = len / scrollWidth;\n        let viewportWidth = Math.min(Renderer.MAX_CANVAS_WIDTH, clientWidth);\n        // Adjust width to avoid gaps between canvases when using bars\n        if (options.barWidth || options.barGap) {\n            const barWidth = options.barWidth || 0.5;\n            const barGap = options.barGap || barWidth / 2;\n            const totalBarWidth = barWidth + barGap;\n            if (viewportWidth % totalBarWidth !== 0) {\n                viewportWidth = Math.floor(viewportWidth / totalBarWidth) * totalBarWidth;\n            }\n        }\n        const start = Math.floor(Math.abs(scrollLeft) * scale);\n        const end = Math.floor(start + viewportWidth * scale);\n        const viewportLen = end - start;\n        // Draw a portion of the waveform from start peak to end peak\n        const draw = (start, end) => {\n            this.renderSingleCanvas(channelData, options, width, height, Math.max(0, start), Math.min(end, len), canvasContainer, progressContainer);\n        };\n        // Draw the waveform in viewport chunks, each with a delay\n        const headDelay = this.createDelay();\n        const tailDelay = this.createDelay();\n        const renderHead = (fromIndex, toIndex) => {\n            draw(fromIndex, toIndex);\n            if (fromIndex > 0) {\n                headDelay(() => {\n                    renderHead(fromIndex - viewportLen, toIndex - viewportLen);\n                });\n            }\n        };\n        const renderTail = (fromIndex, toIndex) => {\n            draw(fromIndex, toIndex);\n            if (toIndex < len) {\n                tailDelay(() => {\n                    renderTail(fromIndex + viewportLen, toIndex + viewportLen);\n                });\n            }\n        };\n        renderHead(start, end);\n        if (end < len) {\n            renderTail(end, end + viewportLen);\n        }\n    }\n    render(audioData) {\n        // Clear previous timeouts\n        this.timeouts.forEach((context) => context.timeout && clearTimeout(context.timeout));\n        this.timeouts = [];\n        // Clear the canvases\n        this.canvasWrapper.innerHTML = '';\n        this.progressWrapper.innerHTML = '';\n        this.wrapper.style.width = '';\n        // Width\n        if (this.options.width != null) {\n            this.scrollContainer.style.width =\n                typeof this.options.width === 'number' ? `${this.options.width}px` : this.options.width;\n        }\n        // Determine the width of the waveform\n        const pixelRatio = window.devicePixelRatio || 1;\n        const parentWidth = this.scrollContainer.clientWidth;\n        const scrollWidth = Math.ceil(audioData.duration * (this.options.minPxPerSec || 0));\n        // Whether the container should scroll\n        this.isScrolling = scrollWidth > parentWidth;\n        const useParentWidth = this.options.fillParent && !this.isScrolling;\n        // Width of the waveform in pixels\n        const width = (useParentWidth ? parentWidth : scrollWidth) * pixelRatio;\n        // Set the width of the wrapper\n        this.wrapper.style.width = useParentWidth ? '100%' : `${scrollWidth}px`;\n        // Set additional styles\n        this.scrollContainer.style.overflowX = this.isScrolling ? 'auto' : 'hidden';\n        this.scrollContainer.classList.toggle('noScrollbar', !!this.options.hideScrollbar);\n        this.cursor.style.backgroundColor = `${this.options.cursorColor || this.options.progressColor}`;\n        this.cursor.style.width = `${this.options.cursorWidth}px`;\n        // Render the waveform\n        if (this.options.splitChannels) {\n            // Render a waveform for each channel\n            for (let i = 0; i < audioData.numberOfChannels; i++) {\n                const options = Object.assign(Object.assign({}, this.options), this.options.splitChannels[i]);\n                this.renderChannel([audioData.getChannelData(i)], options, width);\n            }\n        }\n        else {\n            // Render a single waveform for the first two channels (left and right)\n            const channels = [audioData.getChannelData(0)];\n            if (audioData.numberOfChannels > 1)\n                channels.push(audioData.getChannelData(1));\n            this.renderChannel(channels, this.options, width);\n        }\n        this.audioData = audioData;\n        this.emit('render');\n    }\n    reRender() {\n        // Return if the waveform has not been rendered yet\n        if (!this.audioData)\n            return;\n        // Remember the current cursor position\n        const oldCursorPosition = this.progressWrapper.clientWidth;\n        // Set the new zoom level and re-render the waveform\n        this.render(this.audioData);\n        // Adjust the scroll position so that the cursor stays in the same place\n        const newCursortPosition = this.progressWrapper.clientWidth;\n        this.scrollContainer.scrollLeft += newCursortPosition - oldCursorPosition;\n    }\n    zoom(minPxPerSec) {\n        this.options.minPxPerSec = minPxPerSec;\n        this.reRender();\n    }\n    scrollIntoView(progress, isPlaying = false) {\n        const { clientWidth, scrollLeft, scrollWidth } = this.scrollContainer;\n        const progressWidth = scrollWidth * progress;\n        const center = clientWidth / 2;\n        const minScroll = isPlaying && this.options.autoCenter && !this.isDragging ? center : clientWidth;\n        if (progressWidth > scrollLeft + minScroll || progressWidth < scrollLeft) {\n            // Scroll to the center\n            if (this.options.autoCenter && !this.isDragging) {\n                // If the cursor is in viewport but not centered, scroll to the center slowly\n                const minDiff = center / 20;\n                if (progressWidth - (scrollLeft + center) >= minDiff && progressWidth < scrollLeft + clientWidth) {\n                    this.scrollContainer.scrollLeft += minDiff;\n                }\n                else {\n                    // Otherwise, scroll to the center immediately\n                    this.scrollContainer.scrollLeft = progressWidth - center;\n                }\n            }\n            else if (this.isDragging) {\n                // Scroll just a little bit to allow for some space between the cursor and the edge\n                const gap = 10;\n                this.scrollContainer.scrollLeft =\n                    progressWidth < scrollLeft ? progressWidth - gap : progressWidth - clientWidth + gap;\n            }\n            else {\n                // Scroll to the beginning\n                this.scrollContainer.scrollLeft = progressWidth;\n            }\n        }\n        // Emit the scroll event\n        {\n            const { scrollLeft } = this.scrollContainer;\n            const startX = scrollLeft / scrollWidth;\n            const endX = (scrollLeft + clientWidth) / scrollWidth;\n            this.emit('scroll', startX, endX);\n        }\n    }\n    renderProgress(progress, isPlaying) {\n        if (isNaN(progress))\n            return;\n        const percents = progress * 100;\n        this.canvasWrapper.style.clipPath = `polygon(${percents}% 0, 100% 0, 100% 100%, ${percents}% 100%)`;\n        this.progressWrapper.style.width = `${percents}%`;\n        this.cursor.style.left = `${percents}%`;\n        this.cursor.style.marginLeft = Math.round(percents) === 100 ? `-${this.options.cursorWidth}px` : '';\n        if (this.isScrolling && this.options.autoScroll) {\n            this.scrollIntoView(progress, isPlaying);\n        }\n    }\n}\nRenderer.MAX_CANVAS_WIDTH = 4000;\nexport default Renderer;\n","import EventEmitter from './event-emitter.js';\nclass Timer extends EventEmitter {\n    constructor() {\n        super(...arguments);\n        this.unsubscribe = () => undefined;\n    }\n    start() {\n        this.unsubscribe = this.on('tick', () => {\n            requestAnimationFrame(() => {\n                this.emit('tick');\n            });\n        });\n        this.emit('tick');\n    }\n    stop() {\n        this.unsubscribe();\n    }\n    destroy() {\n        this.unsubscribe();\n    }\n}\nexport default Timer;\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport EventEmitter from './event-emitter.js';\n/**\n * A Web Audio buffer player emulating the behavior of an HTML5 Audio element.\n */\nclass WebAudioPlayer extends EventEmitter {\n    constructor(audioContext = new AudioContext()) {\n        super();\n        this.bufferNode = null;\n        this.autoplay = false;\n        this.playStartTime = 0;\n        this.playedDuration = 0;\n        this._muted = false;\n        this.buffer = null;\n        this.currentSrc = '';\n        this.paused = true;\n        this.crossOrigin = null;\n        this.audioContext = audioContext;\n        this.gainNode = this.audioContext.createGain();\n        this.gainNode.connect(this.audioContext.destination);\n    }\n    load() {\n        return __awaiter(this, void 0, void 0, function* () {\n            return;\n        });\n    }\n    get src() {\n        return this.currentSrc;\n    }\n    set src(value) {\n        this.currentSrc = value;\n        fetch(value)\n            .then((response) => response.arrayBuffer())\n            .then((arrayBuffer) => this.audioContext.decodeAudioData(arrayBuffer))\n            .then((audioBuffer) => {\n            this.buffer = audioBuffer;\n            this.emit('loadedmetadata');\n            this.emit('canplay');\n            if (this.autoplay)\n                this.play();\n        });\n    }\n    _play() {\n        var _a;\n        if (!this.paused)\n            return;\n        this.paused = false;\n        (_a = this.bufferNode) === null || _a === void 0 ? void 0 : _a.disconnect();\n        this.bufferNode = this.audioContext.createBufferSource();\n        this.bufferNode.buffer = this.buffer;\n        this.bufferNode.connect(this.gainNode);\n        if (this.playedDuration >= this.duration) {\n            this.playedDuration = 0;\n        }\n        this.bufferNode.start(this.audioContext.currentTime, this.playedDuration);\n        this.playStartTime = this.audioContext.currentTime;\n        this.bufferNode.onended = () => {\n            if (this.currentTime >= this.duration) {\n                this.pause();\n                this.emit('ended');\n            }\n        };\n    }\n    _pause() {\n        var _a;\n        if (this.paused)\n            return;\n        this.paused = true;\n        (_a = this.bufferNode) === null || _a === void 0 ? void 0 : _a.stop();\n        this.playedDuration += this.audioContext.currentTime - this.playStartTime;\n    }\n    play() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this._play();\n            this.emit('play');\n        });\n    }\n    pause() {\n        this._pause();\n        this.emit('pause');\n    }\n    setSinkId(deviceId) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const ac = this.audioContext;\n            return ac.setSinkId(deviceId);\n        });\n    }\n    get playbackRate() {\n        var _a, _b;\n        return (_b = (_a = this.bufferNode) === null || _a === void 0 ? void 0 : _a.playbackRate.value) !== null && _b !== void 0 ? _b : 1;\n    }\n    set playbackRate(value) {\n        if (this.bufferNode) {\n            this.bufferNode.playbackRate.value = value;\n        }\n    }\n    get currentTime() {\n        return this.paused ? this.playedDuration : this.playedDuration + this.audioContext.currentTime - this.playStartTime;\n    }\n    set currentTime(value) {\n        this.emit('seeking');\n        if (this.paused) {\n            this.playedDuration = value;\n        }\n        else {\n            this._pause();\n            this.playedDuration = value;\n            this._play();\n        }\n        this.emit('timeupdate');\n    }\n    get duration() {\n        var _a;\n        return ((_a = this.buffer) === null || _a === void 0 ? void 0 : _a.duration) || 0;\n    }\n    get volume() {\n        return this.gainNode.gain.value;\n    }\n    set volume(value) {\n        this.gainNode.gain.value = value;\n        this.emit('volumechange');\n    }\n    get muted() {\n        return this._muted;\n    }\n    set muted(value) {\n        if (this._muted === value)\n            return;\n        this._muted = value;\n        if (this._muted) {\n            this.gainNode.disconnect();\n        }\n        else {\n            this.gainNode.connect(this.audioContext.destination);\n        }\n    }\n    /** Get the GainNode used to play the audio. Can be used to attach filters. */\n    getGainNode() {\n        return this.gainNode;\n    }\n}\nexport default WebAudioPlayer;\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport Decoder from './decoder.js';\nimport Fetcher from './fetcher.js';\nimport Player from './player.js';\nimport Renderer from './renderer.js';\nimport Timer from './timer.js';\nimport WebAudioPlayer from './webaudio.js';\nconst defaultOptions = {\n    waveColor: '#999',\n    progressColor: '#555',\n    cursorWidth: 1,\n    minPxPerSec: 0,\n    fillParent: true,\n    interact: true,\n    dragToSeek: false,\n    autoScroll: true,\n    autoCenter: true,\n    sampleRate: 8000,\n};\nclass WaveSurfer extends Player {\n    /** Create a new WaveSurfer instance */\n    static create(options) {\n        return new WaveSurfer(options);\n    }\n    /** Create a new WaveSurfer instance */\n    constructor(options) {\n        const media = options.media ||\n            (options.backend === 'WebAudio' ? new WebAudioPlayer() : undefined);\n        super({\n            media,\n            mediaControls: options.mediaControls,\n            autoplay: options.autoplay,\n            playbackRate: options.audioRate,\n        });\n        this.plugins = [];\n        this.decodedData = null;\n        this.subscriptions = [];\n        this.mediaSubscriptions = [];\n        this.options = Object.assign({}, defaultOptions, options);\n        this.timer = new Timer();\n        const audioElement = media ? undefined : this.getMediaElement();\n        this.renderer = new Renderer(this.options, audioElement);\n        this.initPlayerEvents();\n        this.initRendererEvents();\n        this.initTimerEvents();\n        this.initPlugins();\n        // Load audio if URL is passed or an external media with an src\n        const url = this.options.url || this.getSrc();\n        if (url) {\n            this.load(url, this.options.peaks, this.options.duration);\n        }\n        else if (this.options.peaks && this.options.duration) {\n            // If pre-decoded peaks and duration are provided, render a waveform w/o loading audio\n            this.loadPredecoded();\n        }\n    }\n    initTimerEvents() {\n        // The timer fires every 16ms for a smooth progress animation\n        this.subscriptions.push(this.timer.on('tick', () => {\n            const currentTime = this.getCurrentTime();\n            this.renderer.renderProgress(currentTime / this.getDuration(), true);\n            this.emit('timeupdate', currentTime);\n            this.emit('audioprocess', currentTime);\n        }));\n    }\n    initPlayerEvents() {\n        this.mediaSubscriptions.push(this.onMediaEvent('timeupdate', () => {\n            const currentTime = this.getCurrentTime();\n            this.renderer.renderProgress(currentTime / this.getDuration(), this.isPlaying());\n            this.emit('timeupdate', currentTime);\n        }), this.onMediaEvent('play', () => {\n            this.emit('play');\n            this.timer.start();\n        }), this.onMediaEvent('pause', () => {\n            this.emit('pause');\n            this.timer.stop();\n        }), this.onMediaEvent('emptied', () => {\n            this.timer.stop();\n        }), this.onMediaEvent('ended', () => {\n            this.emit('finish');\n        }), this.onMediaEvent('seeking', () => {\n            this.emit('seeking', this.getCurrentTime());\n        }));\n    }\n    initRendererEvents() {\n        this.subscriptions.push(\n        // Seek on click\n        this.renderer.on('click', (relativeX, relativeY) => {\n            if (this.options.interact) {\n                this.seekTo(relativeX);\n                this.emit('interaction', relativeX * this.getDuration());\n                this.emit('click', relativeX, relativeY);\n            }\n        }), \n        // Double click\n        this.renderer.on('dblclick', (relativeX, relativeY) => {\n            this.emit('dblclick', relativeX, relativeY);\n        }), \n        // Scroll\n        this.renderer.on('scroll', (startX, endX) => {\n            const duration = this.getDuration();\n            this.emit('scroll', startX * duration, endX * duration);\n        }), \n        // Redraw\n        this.renderer.on('render', () => {\n            this.emit('redraw');\n        }));\n        // Drag\n        {\n            let debounce;\n            this.subscriptions.push(this.renderer.on('drag', (relativeX) => {\n                if (!this.options.interact)\n                    return;\n                // Update the visual position\n                this.renderer.renderProgress(relativeX);\n                // Set the audio position with a debounce\n                clearTimeout(debounce);\n                debounce = setTimeout(() => {\n                    this.seekTo(relativeX);\n                }, this.isPlaying() ? 0 : 200);\n                this.emit('interaction', relativeX * this.getDuration());\n                this.emit('drag', relativeX);\n            }));\n        }\n    }\n    initPlugins() {\n        var _a;\n        if (!((_a = this.options.plugins) === null || _a === void 0 ? void 0 : _a.length))\n            return;\n        this.options.plugins.forEach((plugin) => {\n            this.registerPlugin(plugin);\n        });\n    }\n    unsubscribePlayerEvents() {\n        this.mediaSubscriptions.forEach((unsubscribe) => unsubscribe());\n        this.mediaSubscriptions = [];\n    }\n    /** Set new wavesurfer options and re-render it */\n    setOptions(options) {\n        this.options = Object.assign({}, this.options, options);\n        this.renderer.setOptions(this.options);\n        if (options.audioRate) {\n            this.setPlaybackRate(options.audioRate);\n        }\n        if (options.mediaControls != null) {\n            this.getMediaElement().controls = options.mediaControls;\n        }\n    }\n    /** Register a wavesurfer.js plugin */\n    registerPlugin(plugin) {\n        plugin.init(this);\n        this.plugins.push(plugin);\n        // Unregister plugin on destroy\n        this.subscriptions.push(plugin.once('destroy', () => {\n            this.plugins = this.plugins.filter((p) => p !== plugin);\n        }));\n        return plugin;\n    }\n    /** For plugins only: get the waveform wrapper div */\n    getWrapper() {\n        return this.renderer.getWrapper();\n    }\n    /** Get the current scroll position in pixels */\n    getScroll() {\n        return this.renderer.getScroll();\n    }\n    /** Get all registered plugins */\n    getActivePlugins() {\n        return this.plugins;\n    }\n    loadPredecoded() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.options.peaks && this.options.duration) {\n                this.decodedData = Decoder.createBuffer(this.options.peaks, this.options.duration);\n                yield Promise.resolve(); // wait for event listeners to subscribe\n                this.renderDecoded();\n            }\n        });\n    }\n    renderDecoded() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.decodedData) {\n                this.emit('decode', this.getDuration());\n                this.renderer.render(this.decodedData);\n            }\n        });\n    }\n    loadAudio(url, blob, channelData, duration) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.emit('load', url);\n            if (!this.options.media && this.isPlaying())\n                this.pause();\n            this.decodedData = null;\n            // Fetch the entire audio as a blob if pre-decoded data is not provided\n            if (!blob && !channelData) {\n                const onProgress = (percentage) => this.emit('loading', percentage);\n                blob = yield Fetcher.fetchBlob(url, onProgress, this.options.fetchParams);\n            }\n            // Set the mediaelement source\n            this.setSrc(url, blob);\n            // Wait for the audio duration\n            // It should be a promise to allow event listeners to subscribe to the ready and decode events\n            duration =\n                (yield Promise.resolve(duration || this.getDuration())) ||\n                    (yield new Promise((resolve) => {\n                        this.onceMediaEvent('loadedmetadata', () => resolve(this.getDuration()));\n                    })) ||\n                    (yield Promise.resolve(0));\n            // Decode the audio data or use user-provided peaks\n            if (channelData) {\n                this.decodedData = Decoder.createBuffer(channelData, duration);\n            }\n            else if (blob) {\n                const arrayBuffer = yield blob.arrayBuffer();\n                this.decodedData = yield Decoder.decode(arrayBuffer, this.options.sampleRate);\n            }\n            this.renderDecoded();\n            this.emit('ready', this.getDuration());\n        });\n    }\n    /** Load an audio file by URL, with optional pre-decoded audio data */\n    load(url, channelData, duration) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.loadAudio(url, undefined, channelData, duration);\n        });\n    }\n    /** Load an audio blob */\n    loadBlob(blob, channelData, duration) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.loadAudio('blob', blob, channelData, duration);\n        });\n    }\n    /** Zoom the waveform by a given pixels-per-second factor */\n    zoom(minPxPerSec) {\n        if (!this.decodedData) {\n            throw new Error('No audio loaded');\n        }\n        this.renderer.zoom(minPxPerSec);\n        this.emit('zoom', minPxPerSec);\n    }\n    /** Get the decoded audio data */\n    getDecodedData() {\n        return this.decodedData;\n    }\n    /** Get decoded peaks */\n    exportPeaks({ channels = 2, maxLength = 8000, precision = 10000 } = {}) {\n        if (!this.decodedData) {\n            throw new Error('The audio has not been decoded yet');\n        }\n        const maxChannels = Math.min(channels, this.decodedData.numberOfChannels);\n        const peaks = [];\n        for (let i = 0; i < maxChannels; i++) {\n            const channel = this.decodedData.getChannelData(i);\n            const data = [];\n            const sampleSize = Math.round(channel.length / maxLength);\n            for (let i = 0; i < maxLength; i++) {\n                const sample = channel.slice(i * sampleSize, (i + 1) * sampleSize);\n                const max = Math.max(...sample);\n                data.push(Math.round(max * precision) / precision);\n            }\n            peaks.push(data);\n        }\n        return peaks;\n    }\n    /** Get the duration of the audio in seconds */\n    getDuration() {\n        let duration = super.getDuration() || 0;\n        // Fall back to the decoded data duration if the media duration is incorrect\n        if ((duration === 0 || duration === Infinity) && this.decodedData) {\n            duration = this.decodedData.duration;\n        }\n        return duration;\n    }\n    /** Toggle if the waveform should react to clicks */\n    toggleInteraction(isInteractive) {\n        this.options.interact = isInteractive;\n    }\n    /** Seek to a percentage of audio as [0..1] (0 = beginning, 1 = end) */\n    seekTo(progress) {\n        const time = this.getDuration() * progress;\n        this.setTime(time);\n    }\n    /** Play or pause the audio */\n    playPause() {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.isPlaying() ? this.pause() : this.play();\n        });\n    }\n    /** Stop the audio and go to the beginning */\n    stop() {\n        this.pause();\n        this.setTime(0);\n    }\n    /** Skip N or -N seconds from the current position */\n    skip(seconds) {\n        this.setTime(this.getCurrentTime() + seconds);\n    }\n    /** Empty the waveform by loading a tiny silent audio */\n    empty() {\n        this.load('', [[0]], 0.001);\n    }\n    /** Set HTML media element */\n    setMediaElement(element) {\n        this.unsubscribePlayerEvents();\n        super.setMediaElement(element);\n        this.initPlayerEvents();\n    }\n    /** Unmount wavesurfer */\n    destroy() {\n        this.emit('destroy');\n        this.plugins.forEach((plugin) => plugin.destroy());\n        this.subscriptions.forEach((unsubscribe) => unsubscribe());\n        this.unsubscribePlayerEvents();\n        this.timer.destroy();\n        this.renderer.destroy();\n        super.destroy();\n    }\n}\nexport default WaveSurfer;\n","class t{constructor(){this.listeners={},this.on=this.addEventListener,this.un=this.removeEventListener}addEventListener(t,e,i){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(e),null==i?void 0:i.once){const i=()=>{this.removeEventListener(t,i),this.removeEventListener(t,e)};return this.addEventListener(t,i),i}return()=>this.removeEventListener(t,e)}removeEventListener(t,e){var i;null===(i=this.listeners[t])||void 0===i||i.delete(e)}once(t,e){return this.on(t,e,{once:!0})}unAll(){this.listeners={}}emit(t,...e){this.listeners[t]&&this.listeners[t].forEach((t=>t(...e)))}}class e extends t{constructor(t){super(),this.subscriptions=[],this.options=t}onInit(){}init(t){this.wavesurfer=t,this.onInit()}destroy(){this.emit(\"destroy\"),this.subscriptions.forEach((t=>t()))}}function i(t,e,i,n,s=5){let r=()=>{};if(!t)return r;const o=o=>{if(2===o.button)return;o.preventDefault(),o.stopPropagation(),t.style.touchAction=\"none\";let a=o.clientX,h=o.clientY,l=!1;const d=n=>{n.preventDefault(),n.stopPropagation();const r=n.clientX,o=n.clientY;if(l||Math.abs(r-a)>=s||Math.abs(o-h)>=s){const{left:n,top:s}=t.getBoundingClientRect();l||(l=!0,null==i||i(a-n,h-s)),e(r-a,o-h,r-n,o-s),a=r,h=o}},u=t=>{l&&(t.preventDefault(),t.stopPropagation())},c=()=>{t.style.touchAction=\"\",l&&(null==n||n()),r()};document.addEventListener(\"pointermove\",d),document.addEventListener(\"pointerup\",c),document.addEventListener(\"pointerleave\",c),document.addEventListener(\"click\",u,!0),r=()=>{document.removeEventListener(\"pointermove\",d),document.removeEventListener(\"pointerup\",c),document.removeEventListener(\"pointerleave\",c),setTimeout((()=>{document.removeEventListener(\"click\",u,!0)}),10)}};return t.addEventListener(\"pointerdown\",o),()=>{r(),t.removeEventListener(\"pointerdown\",o)}}class n extends t{constructor(t,e,i=0){var n,s,r,o,a,h,l;super(),this.totalDuration=e,this.numberOfChannels=i,this.minLength=0,this.maxLength=1/0,this.id=t.id||`region-${Math.random().toString(32).slice(2)}`,this.start=this.clampPosition(t.start),this.end=this.clampPosition(null!==(n=t.end)&&void 0!==n?n:t.start),this.drag=null===(s=t.drag)||void 0===s||s,this.resize=null===(r=t.resize)||void 0===r||r,this.color=null!==(o=t.color)&&void 0!==o?o:\"rgba(0, 0, 0, 0.1)\",this.minLength=null!==(a=t.minLength)&&void 0!==a?a:this.minLength,this.maxLength=null!==(h=t.maxLength)&&void 0!==h?h:this.maxLength,this.channelIdx=null!==(l=t.channelIdx)&&void 0!==l?l:-1,this.element=this.initElement(),this.setContent(t.content),this.setPart(),this.renderPosition(),this.initMouseEvents()}clampPosition(t){return Math.max(0,Math.min(this.totalDuration,t))}setPart(){const t=this.start===this.end;this.element.setAttribute(\"part\",`${t?\"marker\":\"region\"} ${this.id}`)}addResizeHandles(t){const e=document.createElement(\"div\");e.setAttribute(\"data-resize\",\"left\"),e.setAttribute(\"style\",\"\\n        position: absolute;\\n        z-index: 2;\\n        width: 6px;\\n        height: 100%;\\n        top: 0;\\n        left: 0;\\n        border-left: 2px solid rgba(0, 0, 0, 0.5);\\n        border-radius: 2px 0 0 2px;\\n        cursor: ew-resize;\\n        word-break: keep-all;\\n      \"),e.setAttribute(\"part\",\"region-handle region-handle-left\");const n=e.cloneNode();n.setAttribute(\"data-resize\",\"right\"),n.style.left=\"\",n.style.right=\"0\",n.style.borderRight=n.style.borderLeft,n.style.borderLeft=\"\",n.style.borderRadius=\"0 2px 2px 0\",n.setAttribute(\"part\",\"region-handle region-handle-right\"),t.appendChild(e),t.appendChild(n);i(e,(t=>this.onResize(t,\"start\")),(()=>null),(()=>this.onEndResizing()),1),i(n,(t=>this.onResize(t,\"end\")),(()=>null),(()=>this.onEndResizing()),1)}removeResizeHandles(t){const e=t.querySelector('[data-resize=\"left\"]'),i=t.querySelector('[data-resize=\"right\"]');e&&t.removeChild(e),i&&t.removeChild(i)}initElement(){const t=document.createElement(\"div\"),e=this.start===this.end;let i=0,n=100;return this.channelIdx>=0&&this.channelIdx<this.numberOfChannels&&(n=100/this.numberOfChannels,i=n*this.channelIdx),t.setAttribute(\"style\",`\\n      position: absolute;\\n      top: ${i}%;\\n      height: ${n}%;\\n      background-color: ${e?\"none\":this.color};\\n      border-left: ${e?\"2px solid \"+this.color:\"none\"};\\n      border-radius: 2px;\\n      box-sizing: border-box;\\n      transition: background-color 0.2s ease;\\n      cursor: ${this.drag?\"grab\":\"default\"};\\n      pointer-events: all;\\n    `),!e&&this.resize&&this.addResizeHandles(t),t}renderPosition(){const t=this.start/this.totalDuration,e=(this.totalDuration-this.end)/this.totalDuration;this.element.style.left=100*t+\"%\",this.element.style.right=100*e+\"%\"}initMouseEvents(){const{element:t}=this;t&&(t.addEventListener(\"click\",(t=>this.emit(\"click\",t))),t.addEventListener(\"mouseenter\",(t=>this.emit(\"over\",t))),t.addEventListener(\"mouseleave\",(t=>this.emit(\"leave\",t))),t.addEventListener(\"dblclick\",(t=>this.emit(\"dblclick\",t))),i(t,(t=>this.onMove(t)),(()=>this.onStartMoving()),(()=>this.onEndMoving())))}onStartMoving(){this.drag&&(this.element.style.cursor=\"grabbing\")}onEndMoving(){this.drag&&(this.element.style.cursor=\"grab\",this.emit(\"update-end\"))}_onUpdate(t,e){if(!this.element.parentElement)return;const i=t/this.element.parentElement.clientWidth*this.totalDuration,n=e&&\"start\"!==e?this.start:this.start+i,s=e&&\"end\"!==e?this.end:this.end+i,r=s-n;n>=0&&s<=this.totalDuration&&n<=s&&r>=this.minLength&&r<=this.maxLength&&(this.start=n,this.end=s,this.renderPosition(),this.emit(\"update\"))}onMove(t){this.drag&&this._onUpdate(t)}onResize(t,e){this.resize&&this._onUpdate(t,e)}onEndResizing(){this.resize&&this.emit(\"update-end\")}_setTotalDuration(t){this.totalDuration=t,this.renderPosition()}play(){this.emit(\"play\")}setContent(t){var e;if(null===(e=this.content)||void 0===e||e.remove(),t){if(\"string\"==typeof t){this.content=document.createElement(\"div\");const e=this.start===this.end;this.content.style.padding=`0.2em ${e?.2:.4}em`,this.content.textContent=t}else this.content=t;this.content.setAttribute(\"part\",\"region-content\"),this.element.appendChild(this.content)}else this.content=void 0}setOptions(t){var e,i;if(t.color&&(this.color=t.color,this.element.style.backgroundColor=this.color),void 0!==t.drag&&(this.drag=t.drag,this.element.style.cursor=this.drag?\"grab\":\"default\"),void 0!==t.start||void 0!==t.end){const n=this.start===this.end;this.start=this.clampPosition(null!==(e=t.start)&&void 0!==e?e:this.start),this.end=this.clampPosition(null!==(i=t.end)&&void 0!==i?i:n?this.start:this.end),this.renderPosition(),this.setPart()}if(t.content&&this.setContent(t.content),t.id&&(this.id=t.id,this.setPart()),void 0!==t.resize&&t.resize!==this.resize){const e=this.start===this.end;this.resize=t.resize,this.resize&&!e?this.addResizeHandles(this.element):this.removeResizeHandles(this.element)}}remove(){this.emit(\"remove\"),this.element.remove(),this.element=null}}class s extends e{constructor(t){super(t),this.regions=[],this.regionsContainer=this.initRegionsContainer()}static create(t){return new s(t)}onInit(){if(!this.wavesurfer)throw Error(\"WaveSurfer is not initialized\");this.wavesurfer.getWrapper().appendChild(this.regionsContainer);let t=[];this.subscriptions.push(this.wavesurfer.on(\"timeupdate\",(e=>{const i=this.regions.filter((t=>t.start<=e&&t.end>=e));i.forEach((e=>{t.includes(e)||this.emit(\"region-in\",e)})),t.forEach((t=>{i.includes(t)||this.emit(\"region-out\",t)})),t=i})))}initRegionsContainer(){const t=document.createElement(\"div\");return t.setAttribute(\"style\",\"\\n      position: absolute;\\n      top: 0;\\n      left: 0;\\n      width: 100%;\\n      height: 100%;\\n      z-index: 3;\\n      pointer-events: none;\\n    \"),t}getRegions(){return this.regions}avoidOverlapping(t){if(!t.content)return;const e=t.content,i=e.getBoundingClientRect().left,n=t.element.scrollWidth,s=this.regions.filter((e=>{if(e===t||!e.content)return!1;const s=e.content.getBoundingClientRect().left,r=e.element.scrollWidth;return i<s+r&&s<i+n})).map((t=>{var e;return(null===(e=t.content)||void 0===e?void 0:e.getBoundingClientRect().height)||0})).reduce(((t,e)=>t+e),0);e.style.marginTop=`${s}px`}saveRegion(t){this.regionsContainer.appendChild(t.element),this.avoidOverlapping(t),this.regions.push(t);const e=[t.on(\"update-end\",(()=>{this.avoidOverlapping(t),this.emit(\"region-updated\",t)})),t.on(\"play\",(()=>{var e,i;null===(e=this.wavesurfer)||void 0===e||e.play(),null===(i=this.wavesurfer)||void 0===i||i.setTime(t.start)})),t.on(\"click\",(e=>{this.emit(\"region-clicked\",t,e)})),t.on(\"dblclick\",(e=>{this.emit(\"region-double-clicked\",t,e)})),t.once(\"remove\",(()=>{e.forEach((t=>t())),this.regions=this.regions.filter((e=>e!==t))}))];this.subscriptions.push(...e),this.emit(\"region-created\",t)}addRegion(t){var e,i;if(!this.wavesurfer)throw Error(\"WaveSurfer is not initialized\");const s=this.wavesurfer.getDuration(),r=null===(i=null===(e=this.wavesurfer)||void 0===e?void 0:e.getDecodedData())||void 0===i?void 0:i.numberOfChannels,o=new n(t,s,r);return s?this.saveRegion(o):this.subscriptions.push(this.wavesurfer.once(\"ready\",(t=>{o._setTotalDuration(t),this.saveRegion(o)}))),o}enableDragSelection(t){var e,s;const r=null===(s=null===(e=this.wavesurfer)||void 0===e?void 0:e.getWrapper())||void 0===s?void 0:s.querySelector(\"div\");if(!r)return()=>{};let o=null,a=0;return i(r,((t,e,i)=>{o&&o._onUpdate(t,i>a?\"end\":\"start\")}),(e=>{var i,s;if(a=e,!this.wavesurfer)return;const r=this.wavesurfer.getDuration(),h=null===(s=null===(i=this.wavesurfer)||void 0===i?void 0:i.getDecodedData())||void 0===s?void 0:s.numberOfChannels,l=this.wavesurfer.getWrapper().clientWidth,d=e/l*r,u=(e+5)/l*r;o=new n(Object.assign(Object.assign({},t),{start:d,end:u}),r,h),this.regionsContainer.appendChild(o.element)}),(()=>{o&&(this.saveRegion(o),o=null)}))}clearRegions(){this.regions.forEach((t=>t.remove()))}destroy(){this.clearRegions(),super.destroy()}}export{s as default};\n","export function audioBufferToWav(audioBuffer: AudioBuffer): Uint8Array {\n\tconst numOfChan = audioBuffer.numberOfChannels;\n\tconst length = audioBuffer.length * numOfChan * 2 + 44;\n\tconst buffer = new ArrayBuffer(length);\n\tconst view = new DataView(buffer);\n\tlet offset = 0;\n\n\t// Write WAV header\n\tconst writeString = function (\n\t\tview: DataView,\n\t\toffset: number,\n\t\tstring: string\n\t): void {\n\t\tfor (let i = 0; i < string.length; i++) {\n\t\t\tview.setUint8(offset + i, string.charCodeAt(i));\n\t\t}\n\t};\n\n\twriteString(view, offset, \"RIFF\");\n\toffset += 4;\n\tview.setUint32(offset, length - 8, true);\n\toffset += 4;\n\twriteString(view, offset, \"WAVE\");\n\toffset += 4;\n\twriteString(view, offset, \"fmt \");\n\toffset += 4;\n\tview.setUint32(offset, 16, true);\n\toffset += 4; // Sub-chunk size, 16 for PCM\n\tview.setUint16(offset, 1, true);\n\toffset += 2; // PCM format\n\tview.setUint16(offset, numOfChan, true);\n\toffset += 2;\n\tview.setUint32(offset, audioBuffer.sampleRate, true);\n\toffset += 4;\n\tview.setUint32(offset, audioBuffer.sampleRate * 2 * numOfChan, true);\n\toffset += 4;\n\tview.setUint16(offset, numOfChan * 2, true);\n\toffset += 2;\n\tview.setUint16(offset, 16, true);\n\toffset += 2;\n\twriteString(view, offset, \"data\");\n\toffset += 4;\n\tview.setUint32(offset, audioBuffer.length * numOfChan * 2, true);\n\toffset += 4;\n\n\t// Write PCM audio data\n\tfor (let i = 0; i < audioBuffer.numberOfChannels; i++) {\n\t\tconst channel = audioBuffer.getChannelData(i);\n\t\tfor (let j = 0; j < channel.length; j++) {\n\t\t\tview.setInt16(offset, channel[j] * 0xffff, true);\n\t\t\toffset += 2;\n\t\t}\n\t}\n\n\treturn new Uint8Array(buffer);\n}\n","import type WaveSurfer from \"wavesurfer.js\";\nimport Regions from \"wavesurfer.js/dist/plugins/regions.js\";\nimport { audioBufferToWav } from \"./audioBufferToWav\";\n\nexport interface LoadedParams {\n\tautoplay?: boolean;\n}\n\nexport function blob_to_data_url(blob: Blob): Promise<string> {\n\treturn new Promise((fulfill, reject) => {\n\t\tlet reader = new FileReader();\n\t\treader.onerror = reject;\n\t\treader.onload = () => fulfill(reader.result as string);\n\t\treader.readAsDataURL(blob);\n\t});\n}\n\nexport const process_audio = async (\n\taudioBuffer: AudioBuffer,\n\tstart?: number,\n\tend?: number\n): Promise<Uint8Array> => {\n\tconst audioContext = new AudioContext();\n\tconst numberOfChannels = audioBuffer.numberOfChannels;\n\tconst sampleRate = audioBuffer.sampleRate;\n\n\tlet trimmedLength = audioBuffer.length;\n\tlet startOffset = 0;\n\n\tif (start && end) {\n\t\tstartOffset = Math.round(start * sampleRate);\n\t\tconst endOffset = Math.round(end * sampleRate);\n\t\ttrimmedLength = endOffset - startOffset;\n\t}\n\n\tconst trimmedAudioBuffer = audioContext.createBuffer(\n\t\tnumberOfChannels,\n\t\ttrimmedLength,\n\t\tsampleRate\n\t);\n\n\tfor (let channel = 0; channel < numberOfChannels; channel++) {\n\t\tconst channelData = audioBuffer.getChannelData(channel);\n\t\tconst trimmedData = trimmedAudioBuffer.getChannelData(channel);\n\t\tfor (let i = 0; i < trimmedLength; i++) {\n\t\t\ttrimmedData[i] = channelData[startOffset + i];\n\t\t}\n\t}\n\n\treturn audioBufferToWav(trimmedAudioBuffer);\n};\n\nexport function loaded(\n\tnode: HTMLAudioElement,\n\t{ autoplay }: LoadedParams = {}\n): void {\n\tasync function handle_playback(): Promise<void> {\n\t\tif (!autoplay) return;\n\t\tnode.pause();\n\t\tawait node.play();\n\t}\n}\n\nexport const skipAudio = (waveform: WaveSurfer, amount: number): void => {\n\tif (!waveform) return;\n\twaveform.skip(amount);\n};\n\nexport const addRegion = (\n\twaveform: WaveSurfer,\n\twaveformRegions: Regions,\n\tstart: number,\n\tend: number\n): void => {\n\twaveformRegions = waveform.registerPlugin(Regions.create());\n\n\twaveformRegions.addRegion({\n\t\tstart: start,\n\t\tend: end,\n\t\tcolor: \"rgba(255, 0, 0, 0.1)\",\n\t\tdrag: true,\n\t\tresize: true\n\t});\n};\n\nexport const getSkipRewindAmount = (\n\taudioDuration: number,\n\tskip_length?: number | null\n): number => {\n\treturn (audioDuration / 100) * (skip_length || 5);\n};\n","<script lang=\"ts\">\n\timport { Play, Pause, Forward, Backward, Undo, Trim } from \"@gradio/icons\";\n\timport { getSkipRewindAmount } from \"../shared/utils\";\n\timport type { I18nFormatter } from \"@gradio/utils\";\n\timport WaveSurfer from \"wavesurfer.js\";\n\timport RegionsPlugin, {\n\t\ttype Region\n\t} from \"wavesurfer.js/dist/plugins/regions.js\";\n\timport type { WaveformOptions } from \"./types\";\n\n\texport let waveform: WaveSurfer;\n\texport let audioDuration: number;\n\texport let i18n: I18nFormatter;\n\texport let playing: boolean;\n\texport let showRedo = false;\n\texport let interactive = false;\n\texport let handle_trim_audio: (start: number, end: number) => void;\n\texport let mode = \"\";\n\texport let container: HTMLDivElement;\n\texport let handle_reset_value: () => void;\n\texport let waveform_settings: WaveformOptions = {};\n\n\texport let trimDuration = 0;\n\n\tlet playbackSpeeds = [0.5, 1, 1.5, 2];\n\tlet playbackSpeed = playbackSpeeds[1];\n\n\tlet trimRegion: RegionsPlugin;\n\tlet activeRegion: Region | null = null;\n\n\tlet leftRegionHandle: HTMLDivElement | null;\n\tlet rightRegionHandle: HTMLDivElement | null;\n\tlet activeHandle = \"\";\n\n\t$: trimRegion = waveform.registerPlugin(RegionsPlugin.create());\n\n\t$: trimRegion?.on(\"region-out\", (region) => {\n\t\tregion.play();\n\t});\n\n\t$: trimRegion?.on(\"region-updated\", (region) => {\n\t\ttrimDuration = region.end - region.start;\n\t});\n\n\t$: trimRegion?.on(\"region-clicked\", (region, e) => {\n\t\te.stopPropagation(); // prevent triggering a click on the waveform\n\t\tactiveRegion = region;\n\t\tregion.play();\n\t});\n\n\tconst addTrimRegion = (): void => {\n\t\tactiveRegion = trimRegion.addRegion({\n\t\t\tstart: audioDuration / 4,\n\t\t\tend: audioDuration / 2,\n\t\t\tcolor: \"hsla(15, 85%, 40%, 0.4)\",\n\t\t\tdrag: true,\n\t\t\tresize: true\n\t\t});\n\n\t\ttrimDuration = activeRegion.end - activeRegion.start;\n\t};\n\n\t$: if (activeRegion) {\n\t\tconst shadowRoot = container.children[0]!.shadowRoot!;\n\n\t\trightRegionHandle = shadowRoot.querySelector('[data-resize=\"right\"]');\n\t\tleftRegionHandle = shadowRoot.querySelector('[data-resize=\"left\"]');\n\n\t\tif (leftRegionHandle && rightRegionHandle) {\n\t\t\tleftRegionHandle.setAttribute(\"role\", \"button\");\n\t\t\trightRegionHandle.setAttribute(\"role\", \"button\");\n\t\t\tleftRegionHandle?.setAttribute(\"aria-label\", \"Drag to adjust start time\");\n\t\t\trightRegionHandle?.setAttribute(\"aria-label\", \"Drag to adjust end time\");\n\t\t\tleftRegionHandle?.setAttribute(\"tabindex\", \"0\");\n\t\t\trightRegionHandle?.setAttribute(\"tabindex\", \"0\");\n\n\t\t\tleftRegionHandle.addEventListener(\"focus\", () => {\n\t\t\t\tif (trimRegion) activeHandle = \"left\";\n\t\t\t});\n\n\t\t\trightRegionHandle.addEventListener(\"focus\", () => {\n\t\t\t\tif (trimRegion) activeHandle = \"right\";\n\t\t\t});\n\t\t}\n\t}\n\n\tconst trimAudio = (): void => {\n\t\tif (waveform && trimRegion) {\n\t\t\tif (activeRegion) {\n\t\t\t\tconst start = activeRegion.start;\n\t\t\t\tconst end = activeRegion.end;\n\t\t\t\thandle_trim_audio(start, end);\n\t\t\t\tmode = \"\";\n\t\t\t\tactiveRegion = null;\n\t\t\t}\n\t\t}\n\t};\n\n\tconst clearRegions = (): void => {\n\t\ttrimRegion?.getRegions().forEach((region) => {\n\t\t\tregion.remove();\n\t\t});\n\t\ttrimRegion?.clearRegions();\n\t};\n\n\tconst toggleTrimmingMode = (): void => {\n\t\tclearRegions();\n\t\tif (mode === \"edit\") {\n\t\t\tmode = \"\";\n\t\t} else {\n\t\t\tmode = \"edit\";\n\t\t\taddTrimRegion();\n\t\t}\n\t};\n\n\tconst adjustRegionHandles = (handle: string, key: string): void => {\n\t\tlet newStart;\n\t\tlet newEnd;\n\n\t\tif (!activeRegion) return;\n\t\tif (handle === \"left\") {\n\t\t\tif (key === \"ArrowLeft\") {\n\t\t\t\tnewStart = activeRegion.start - 0.05;\n\t\t\t\tnewEnd = activeRegion.end;\n\t\t\t} else {\n\t\t\t\tnewStart = activeRegion.start + 0.05;\n\t\t\t\tnewEnd = activeRegion.end;\n\t\t\t}\n\t\t} else {\n\t\t\tif (key === \"ArrowLeft\") {\n\t\t\t\tnewStart = activeRegion.start;\n\t\t\t\tnewEnd = activeRegion.end - 0.05;\n\t\t\t} else {\n\t\t\t\tnewStart = activeRegion.start;\n\t\t\t\tnewEnd = activeRegion.end + 0.05;\n\t\t\t}\n\t\t}\n\n\t\tactiveRegion.setOptions({\n\t\t\tstart: newStart,\n\t\t\tend: newEnd\n\t\t});\n\n\t\ttrimDuration = activeRegion.end - activeRegion.start;\n\t};\n\n\t$: trimRegion &&\n\t\twindow.addEventListener(\"keydown\", (e) => {\n\t\t\tif (e.key === \"ArrowLeft\") {\n\t\t\t\tadjustRegionHandles(activeHandle, \"ArrowLeft\");\n\t\t\t} else if (e.key === \"ArrowRight\") {\n\t\t\t\tadjustRegionHandles(activeHandle, \"ArrowRight\");\n\t\t\t}\n\t\t});\n</script>\n\n<div class=\"controls\" data-testid=\"waveform-controls\">\n\t<button\n\t\tclass=\"playback icon\"\n\t\taria-label={`Adjust playback speed to ${\n\t\t\tplaybackSpeeds[\n\t\t\t\t(playbackSpeeds.indexOf(playbackSpeed) + 1) % playbackSpeeds.length\n\t\t\t]\n\t\t}x`}\n\t\ton:click={() => {\n\t\t\tplaybackSpeed =\n\t\t\t\tplaybackSpeeds[\n\t\t\t\t\t(playbackSpeeds.indexOf(playbackSpeed) + 1) % playbackSpeeds.length\n\t\t\t\t];\n\n\t\t\twaveform.setPlaybackRate(playbackSpeed);\n\t\t}}\n\t>\n\t\t<span>{playbackSpeed}x</span>\n\t</button>\n\n\t<div class=\"play-pause-wrapper\">\n\t\t<button\n\t\t\tclass=\"rewind icon\"\n\t\t\taria-label={`Skip backwards by ${getSkipRewindAmount(\n\t\t\t\taudioDuration,\n\t\t\t\twaveform_settings.skip_length\n\t\t\t)} seconds`}\n\t\t\ton:click={() =>\n\t\t\t\twaveform.skip(\n\t\t\t\t\tgetSkipRewindAmount(audioDuration, waveform_settings.skip_length) * -1\n\t\t\t\t)}\n\t\t>\n\t\t\t<Backward />\n\t\t</button>\n\t\t<button\n\t\t\tclass=\"play-pause-button icon\"\n\t\t\ton:click={() => waveform.playPause()}\n\t\t\taria-label={playing ? i18n(\"common.play\") : i18n(\"common.pause\")}\n\t\t>\n\t\t\t{#if playing}\n\t\t\t\t<Pause />\n\t\t\t{:else}\n\t\t\t\t<Play />\n\t\t\t{/if}\n\t\t</button>\n\t\t<button\n\t\t\tclass=\"skip icon\"\n\t\t\taria-label=\"Skip forward by {getSkipRewindAmount(\n\t\t\t\taudioDuration,\n\t\t\t\twaveform_settings.skip_length\n\t\t\t)} seconds\"\n\t\t\ton:click={() =>\n\t\t\t\twaveform.skip(\n\t\t\t\t\tgetSkipRewindAmount(audioDuration, waveform_settings.skip_length)\n\t\t\t\t)}\n\t\t>\n\t\t\t<Forward />\n\t\t</button>\n\t</div>\n\n\t<div class=\"settings-wrapper\">\n\t\t{#if showRedo && mode === \"\"}\n\t\t\t<button\n\t\t\t\tclass=\"action icon\"\n\t\t\t\taria-label=\"Reset audio\"\n\t\t\t\ton:click={() => {\n\t\t\t\t\thandle_reset_value();\n\t\t\t\t\tclearRegions();\n\t\t\t\t\tmode = \"\";\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<Undo />\n\t\t\t</button>\n\t\t{/if}\n\n\t\t{#if interactive}\n\t\t\t{#if mode === \"\"}\n\t\t\t\t<button\n\t\t\t\t\tclass=\"action icon\"\n\t\t\t\t\taria-label=\"Trim audio to selection\"\n\t\t\t\t\ton:click={toggleTrimmingMode}\n\t\t\t\t>\n\t\t\t\t\t<Trim />\n\t\t\t\t</button>\n\t\t\t{:else}\n\t\t\t\t<button class=\"text-button\" on:click={trimAudio}>Trim</button>\n\t\t\t\t<button class=\"text-button\" on:click={toggleTrimmingMode}>Cancel</button\n\t\t\t\t>\n\t\t\t{/if}\n\t\t{/if}\n\t</div>\n</div>\n\n<style>\n\t.settings-wrapper {\n\t\tdisplay: flex;\n\t\tjustify-self: self-end;\n\t}\n\t.text-button {\n\t\tborder: 1px solid var(--neutral-400);\n\t\tborder-radius: var(--radius-sm);\n\t\tfont-weight: 300;\n\t\tfont-size: var(--size-3);\n\t\ttext-align: center;\n\t\tcolor: var(--neutral-400);\n\t\theight: var(--size-5);\n\t\tfont-weight: bold;\n\t\tpadding: 0 5px;\n\t\tmargin-left: 5px;\n\t}\n\n\t.text-button:hover,\n\t.text-button:focus {\n\t\tcolor: var(--color-accent);\n\t\tborder-color: var(--color-accent);\n\t}\n\n\t.controls {\n\t\tdisplay: grid;\n\t\tgrid-template-columns: 1fr 1fr 1fr;\n\t\tmargin-top: 5px;\n\t\toverflow: hidden;\n\t\talign-items: center;\n\t}\n\n\t@media (max-width: 320px) {\n\t\t.controls {\n\t\t\tdisplay: flex;\n\t\t\tflex-wrap: wrap;\n\t\t}\n\n\t\t.controls * {\n\t\t\tmargin: var(--spacing-sm);\n\t\t}\n\n\t\t.controls .text-button {\n\t\t\tmargin-left: 0;\n\t\t}\n\t}\n\t.action {\n\t\twidth: var(--size-5);\n\t\twidth: var(--size-5);\n\t\tcolor: var(--neutral-400);\n\t\tmargin-left: var(--spacing-md);\n\t}\n\t.icon:hover,\n\t.icon:focus {\n\t\tcolor: var(--color-accent);\n\t}\n\t.play-pause-wrapper {\n\t\tdisplay: flex;\n\t\tjustify-self: center;\n\t}\n\t.playback {\n\t\tborder: 1px solid var(--neutral-400);\n\t\tborder-radius: var(--radius-sm);\n\t\twidth: 5.5ch;\n\t\tfont-weight: 300;\n\t\tfont-size: var(--size-3);\n\t\ttext-align: center;\n\t\tcolor: var(--neutral-400);\n\t\theight: var(--size-5);\n\t\tfont-weight: bold;\n\t}\n\n\t.playback:hover {\n\t\tcolor: var(--color-accent);\n\t\tborder-color: var(--color-accent);\n\t}\n\n\t.rewind,\n\t.skip {\n\t\tmargin: 0 10px;\n\t\tcolor: var(--neutral-400);\n\t}\n\n\t.play-pause-button {\n\t\twidth: var(--size-8);\n\t\twidth: var(--size-8);\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tcolor: var(--neutral-400);\n\t\tfill: var(--neutral-400);\n\t}\n</style>\n","<script lang=\"ts\">\n\timport { onMount } from \"svelte\";\n\timport { Music } from \"@gradio/icons\";\n\timport type { I18nFormatter } from \"@gradio/utils\";\n\timport WaveSurfer from \"wavesurfer.js\";\n\timport { skipAudio, process_audio } from \"../shared/utils\";\n\timport WaveformControls from \"../shared/WaveformControls.svelte\";\n\timport { Empty } from \"@gradio/atoms\";\n\timport { resolve_wasm_src } from \"@gradio/wasm/svelte\";\n\timport type { FileData } from \"@gradio/client\";\n\n\texport let value: null | FileData = null;\n\texport let label: string;\n\texport let autoplay: boolean;\n\texport let i18n: I18nFormatter;\n\texport let dispatch: (event: any, detail?: any) => void;\n\texport let dispatch_blob: (\n\t\tblobs: Uint8Array[] | Blob[],\n\t\tevent: \"stream\" | \"change\" | \"stop_recording\"\n\t) => Promise<void> = () => Promise.resolve();\n\texport let interactive = false;\n\texport let waveform_settings = {};\n\texport let mode = \"\";\n\texport let handle_reset_value: () => void = () => {};\n\n\tlet container: HTMLDivElement;\n\tlet waveform: WaveSurfer;\n\tlet playing = false;\n\n\tlet timeRef: HTMLTimeElement;\n\tlet durationRef: HTMLTimeElement;\n\tlet audioDuration: number;\n\n\tlet trimDuration = 0;\n\n\tconst formatTime = (seconds: number): string => {\n\t\tconst minutes = Math.floor(seconds / 60);\n\t\tconst secondsRemainder = Math.round(seconds) % 60;\n\t\tconst paddedSeconds = `0${secondsRemainder}`.slice(-2);\n\t\treturn `${minutes}:${paddedSeconds}`;\n\t};\n\n\tconst create_waveform = (): void => {\n\t\twaveform = WaveSurfer.create({\n\t\t\tcontainer: container,\n\t\t\turl: value?.url,\n\t\t\t...waveform_settings\n\t\t});\n\t};\n\n\t$: if (container !== undefined) {\n\t\tif (waveform !== undefined) waveform.destroy();\n\t\tcontainer.innerHTML = \"\";\n\t\tcreate_waveform();\n\t\tplaying = false;\n\t}\n\n\t$: if (autoplay) {\n\t\twaveform?.play();\n\t\tplaying = true;\n\t}\n\n\t$: waveform?.on(\"decode\", (duration: any) => {\n\t\taudioDuration = duration;\n\t\tdurationRef && (durationRef.textContent = formatTime(duration));\n\t});\n\n\t$: waveform?.on(\n\t\t\"timeupdate\",\n\t\t(currentTime: any) =>\n\t\t\ttimeRef && (timeRef.textContent = formatTime(currentTime))\n\t);\n\n\t$: waveform?.on(\"finish\", () => {\n\t\tplaying = false;\n\t\tdispatch(\"stop\");\n\t\tdispatch(\"end\");\n\t});\n\t$: waveform?.on(\"pause\", () => {\n\t\tplaying = false;\n\t\tdispatch(\"pause\");\n\t});\n\t$: waveform?.on(\"play\", () => {\n\t\tplaying = true;\n\t\tdispatch(\"play\");\n\t});\n\n\tconst handle_trim_audio = async (\n\t\tstart: number,\n\t\tend: number\n\t): Promise<void> => {\n\t\tmode = \"\";\n\t\tconst decodedData = waveform.getDecodedData();\n\t\tif (decodedData)\n\t\t\tawait process_audio(decodedData, start, end).then(\n\t\t\t\tasync (trimmedBlob: Uint8Array) => {\n\t\t\t\t\tawait dispatch_blob([trimmedBlob], \"change\");\n\t\t\t\t\twaveform.destroy();\n\t\t\t\t\tcreate_waveform();\n\t\t\t\t}\n\t\t\t);\n\t\tdispatch(\"edit\");\n\t};\n\n\tasync function load_audio(data: string): Promise<void> {\n\t\tawait resolve_wasm_src(data).then((resolved_src) => {\n\t\t\tif (!resolved_src) return;\n\t\t\treturn waveform?.load(resolved_src);\n\t\t});\n\t}\n\n\t$: value?.url && load_audio(value.url);\n\n\tonMount(() => {\n\t\twindow.addEventListener(\"keydown\", (e) => {\n\t\t\tif (e.key === \"ArrowRight\" && mode !== \"edit\") {\n\t\t\t\tskipAudio(waveform, 0.1);\n\t\t\t} else if (e.key === \"ArrowLeft\" && mode !== \"edit\") {\n\t\t\t\tskipAudio(waveform, -0.1);\n\t\t\t}\n\t\t});\n\t});\n</script>\n\n{#if value === null}\n\t<Empty size=\"small\">\n\t\t<Music />\n\t</Empty>\n{:else}\n\t<div\n\t\tclass=\"component-wrapper\"\n\t\tdata-testid={label ? \"waveform-\" + label : \"unlabelled-audio\"}\n\t>\n\t\t<div class=\"waveform-container\">\n\t\t\t<div id=\"waveform\" bind:this={container} />\n\t\t</div>\n\n\t\t<div class=\"timestamps\">\n\t\t\t<time bind:this={timeRef} id=\"time\">0:00</time>\n\t\t\t<div>\n\t\t\t\t{#if mode === \"edit\" && trimDuration > 0}\n\t\t\t\t\t<time id=\"trim-duration\">{formatTime(trimDuration)}</time>\n\t\t\t\t{/if}\n\t\t\t\t<time bind:this={durationRef} id=\"duration\">0:00</time>\n\t\t\t</div>\n\t\t</div>\n\n\t\t{#if waveform}\n\t\t\t<WaveformControls\n\t\t\t\t{container}\n\t\t\t\t{waveform}\n\t\t\t\t{playing}\n\t\t\t\t{audioDuration}\n\t\t\t\t{i18n}\n\t\t\t\t{interactive}\n\t\t\t\t{handle_trim_audio}\n\t\t\t\tbind:mode\n\t\t\t\tbind:trimDuration\n\t\t\t\tshowRedo={interactive}\n\t\t\t\t{handle_reset_value}\n\t\t\t\t{waveform_settings}\n\t\t\t/>\n\t\t{/if}\n\t</div>\n{/if}\n\n<style>\n\t.component-wrapper {\n\t\tpadding: var(--size-3);\n\t}\n\n\t.timestamps {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\twidth: 100%;\n\t\tpadding: var(--size-1) 0;\n\t}\n\n\t#time {\n\t\tcolor: var(--neutral-400);\n\t}\n\n\t#duration {\n\t\tcolor: var(--neutral-400);\n\t}\n\n\t#trim-duration {\n\t\tcolor: var(--color-accent);\n\t\tmargin-right: var(--spacing-sm);\n\t}\n\t.waveform-container {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\twidth: var(--size-full);\n\t}\n\n\t#waveform {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tposition: relative;\n\t}\n</style>\n","<script lang=\"ts\">\n\timport { uploadToHuggingFace } from \"@gradio/utils\";\n\timport { Empty } from \"@gradio/atoms\";\n\timport { ShareButton, IconButton, BlockLabel } from \"@gradio/atoms\";\n\timport { Download, Music } from \"@gradio/icons\";\n\timport type { I18nFormatter } from \"@gradio/utils\";\n\timport AudioPlayer from \"../player/AudioPlayer.svelte\";\n\timport { createEventDispatcher } from \"svelte\";\n\timport type { FileData } from \"@gradio/client\";\n\n\texport let value: null | FileData = null;\n\texport let label: string;\n\texport let show_label = true;\n\texport let autoplay: boolean;\n\texport let show_download_button = true;\n\texport let show_share_button = false;\n\texport let i18n: I18nFormatter;\n\texport let waveform_settings = {};\n\n\tconst dispatch = createEventDispatcher<{\n\t\tchange: FileData;\n\t\tplay: undefined;\n\t\tpause: undefined;\n\t\tend: undefined;\n\t\tstop: undefined;\n\t}>();\n\n\t$: value && dispatch(\"change\", value);\n</script>\n\n<BlockLabel\n\t{show_label}\n\tIcon={Music}\n\tfloat={false}\n\tlabel={label || i18n(\"audio.audio\")}\n/>\n\n{#if value !== null}\n\t<div class=\"icon-buttons\">\n\t\t{#if show_download_button}\n\t\t\t<a\n\t\t\t\thref={value.url}\n\t\t\t\ttarget={window.__is_colab__ ? \"_blank\" : null}\n\t\t\t\tdownload={value.url}\n\t\t\t>\n\t\t\t\t<IconButton Icon={Download} label={i18n(\"common.download\")} />\n\t\t\t</a>\n\t\t{/if}\n\t\t{#if show_share_button}\n\t\t\t<ShareButton\n\t\t\t\t{i18n}\n\t\t\t\ton:error\n\t\t\t\ton:share\n\t\t\t\tformatter={async (value) => {\n\t\t\t\t\tif (!value) return \"\";\n\t\t\t\t\tlet url = await uploadToHuggingFace(value.url, \"url\");\n\t\t\t\t\treturn `<audio controls src=\"${url}\"></audio>`;\n\t\t\t\t}}\n\t\t\t\t{value}\n\t\t\t/>\n\t\t{/if}\n\t</div>\n\n\t<AudioPlayer\n\t\t{value}\n\t\t{label}\n\t\t{autoplay}\n\t\t{i18n}\n\t\t{dispatch}\n\t\t{waveform_settings}\n\t/>\n{:else}\n\t<Empty size=\"small\">\n\t\t<Music />\n\t</Empty>\n{/if}\n\n<style>\n\t.icon-buttons {\n\t\tdisplay: flex;\n\t\tposition: absolute;\n\t\ttop: 6px;\n\t\tright: 6px;\n\t\tgap: var(--size-1);\n\t}\n</style>\n","function e(e,t,i,s){return new(i||(i=Promise))((function(r,n){function o(e){try{d(s.next(e))}catch(e){n(e)}}function a(e){try{d(s.throw(e))}catch(e){n(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}d((s=s.apply(e,t||[])).next())}))}\"function\"==typeof SuppressedError&&SuppressedError;class t{constructor(){this.listeners={},this.on=this.addEventListener,this.un=this.removeEventListener}addEventListener(e,t,i){if(this.listeners[e]||(this.listeners[e]=new Set),this.listeners[e].add(t),null==i?void 0:i.once){const i=()=>{this.removeEventListener(e,i),this.removeEventListener(e,t)};return this.addEventListener(e,i),i}return()=>this.removeEventListener(e,t)}removeEventListener(e,t){var i;null===(i=this.listeners[e])||void 0===i||i.delete(t)}once(e,t){return this.on(e,t,{once:!0})}unAll(){this.listeners={}}emit(e,...t){this.listeners[e]&&this.listeners[e].forEach((e=>e(...t)))}}class i extends t{constructor(e){super(),this.subscriptions=[],this.options=e}onInit(){}init(e){this.wavesurfer=e,this.onInit()}destroy(){this.emit(\"destroy\"),this.subscriptions.forEach((e=>e()))}}const s=[\"audio/webm\",\"audio/wav\",\"audio/mpeg\",\"audio/mp4\",\"audio/mp3\"];class r extends i{constructor(e){var t;super(Object.assign(Object.assign({},e),{audioBitsPerSecond:null!==(t=e.audioBitsPerSecond)&&void 0!==t?t:128e3})),this.stream=null,this.mediaRecorder=null}static create(e){return new r(e||{})}renderMicStream(e){const t=new AudioContext,i=t.createMediaStreamSource(e),s=t.createAnalyser();i.connect(s);const r=s.frequencyBinCount,n=new Float32Array(r),o=r/t.sampleRate;let a;const d=()=>{s.getFloatTimeDomainData(n),this.wavesurfer&&(this.wavesurfer.options.cursorWidth=0,this.wavesurfer.options.interact=!1,this.wavesurfer.load(\"\",[n],o)),a=requestAnimationFrame(d)};return d(),()=>{cancelAnimationFrame(a),null==i||i.disconnect(),null==t||t.close()}}startMic(t){return e(this,void 0,void 0,(function*(){let e;try{e=yield navigator.mediaDevices.getUserMedia({audio:!(null==t?void 0:t.deviceId)||{deviceId:t.deviceId}})}catch(e){throw new Error(\"Error accessing the microphone: \"+e.message)}const i=this.renderMicStream(e);return this.subscriptions.push(this.once(\"destroy\",i)),this.stream=e,e}))}stopMic(){this.stream&&(this.stream.getTracks().forEach((e=>e.stop())),this.stream=null,this.mediaRecorder=null)}startRecording(t){return e(this,void 0,void 0,(function*(){const e=this.stream||(yield this.startMic(t)),i=this.mediaRecorder||new MediaRecorder(e,{mimeType:this.options.mimeType||s.find((e=>MediaRecorder.isTypeSupported(e))),audioBitsPerSecond:this.options.audioBitsPerSecond});this.mediaRecorder=i,this.stopRecording();const r=[];i.ondataavailable=e=>{e.data.size>0&&r.push(e.data)},i.onstop=()=>{var e;const t=new Blob(r,{type:i.mimeType});this.emit(\"record-end\",t),!1!==this.options.renderRecordedAudio&&(null===(e=this.wavesurfer)||void 0===e||e.load(URL.createObjectURL(t)))},i.start(),this.emit(\"record-start\")}))}isRecording(){var e;return\"recording\"===(null===(e=this.mediaRecorder)||void 0===e?void 0:e.state)}isPaused(){var e;return\"paused\"===(null===(e=this.mediaRecorder)||void 0===e?void 0:e.state)}stopRecording(){var e;this.isRecording()&&(null===(e=this.mediaRecorder)||void 0===e||e.stop())}pauseRecording(){var e;this.isRecording()&&(null===(e=this.mediaRecorder)||void 0===e||e.pause(),this.emit(\"record-pause\"))}resumeRecording(){var e;this.isPaused()&&(null===(e=this.mediaRecorder)||void 0===e||e.resume(),this.emit(\"record-resume\"))}static getAvailableAudioDevices(){return e(this,void 0,void 0,(function*(){return navigator.mediaDevices.enumerateDevices().then((e=>e.filter((e=>\"audioinput\"===e.kind))))}))}destroy(){super.destroy(),this.stopRecording(),this.stopMic()}}export{r as default};\n","<script lang=\"ts\">\n\timport { onMount } from \"svelte\";\n\timport { Pause } from \"@gradio/icons\";\n\timport type { I18nFormatter } from \"@gradio/utils\";\n\timport RecordPlugin from \"wavesurfer.js/dist/plugins/record.js\";\n\n\texport let record: RecordPlugin;\n\texport let i18n: I18nFormatter;\n\texport let dispatch: (event: string, detail?: any) => void;\n\n\tlet micDevices: MediaDeviceInfo[] = [];\n\tlet recordButton: HTMLButtonElement;\n\tlet pauseButton: HTMLButtonElement;\n\tlet resumeButton: HTMLButtonElement;\n\tlet stopButton: HTMLButtonElement;\n\tlet stopButtonPaused: HTMLButtonElement;\n\n\t$: try {\n\t\tlet tempDevices: MediaDeviceInfo[] = [];\n\t\tRecordPlugin.getAvailableAudioDevices().then(\n\t\t\t(devices: MediaDeviceInfo[]) => {\n\t\t\t\tmicDevices = devices;\n\t\t\t\tdevices.forEach((device) => {\n\t\t\t\t\tif (device.deviceId) {\n\t\t\t\t\t\ttempDevices.push(device);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tmicDevices = tempDevices;\n\t\t\t}\n\t\t);\n\t} catch (err) {\n\t\tif (err instanceof DOMException && err.name == \"NotAllowedError\") {\n\t\t\tdispatch(\"error\", i18n(\"audio.allow_recording_access\"));\n\t\t}\n\t\tthrow err;\n\t}\n\tonMount(() => {\n\t\trecordButton = document.getElementById(\"record\") as HTMLButtonElement;\n\t\tpauseButton = document.getElementById(\"pause\") as HTMLButtonElement;\n\t\tresumeButton = document.getElementById(\"resume\") as HTMLButtonElement;\n\t\tstopButton = document.getElementById(\"stop\") as HTMLButtonElement;\n\t\tstopButtonPaused = document.getElementById(\n\t\t\t\"stop-paused\"\n\t\t) as HTMLButtonElement;\n\t});\n\n\t$: record.on(\"record-start\", () => {\n\t\trecord.startMic();\n\n\t\trecordButton.style.display = \"none\";\n\t\tstopButton.style.display = \"flex\";\n\t\tpauseButton.style.display = \"block\";\n\t});\n\n\t$: record.on(\"record-end\", () => {\n\t\tif (record.isPaused()) {\n\t\t\trecord.resumeRecording();\n\t\t\trecord.stopRecording();\n\t\t}\n\t\trecord.stopMic();\n\n\t\trecordButton.style.display = \"flex\";\n\t\tstopButton.style.display = \"none\";\n\t\tpauseButton.style.display = \"none\";\n\t\trecordButton.disabled = false;\n\t});\n\n\t$: record.on(\"record-pause\", () => {\n\t\tpauseButton.style.display = \"none\";\n\t\tresumeButton.style.display = \"block\";\n\t\tstopButton.style.display = \"none\";\n\t\tstopButtonPaused.style.display = \"flex\";\n\t});\n\n\t$: record.on(\"record-resume\", () => {\n\t\tpauseButton.style.display = \"block\";\n\t\tresumeButton.style.display = \"none\";\n\t\trecordButton.style.display = \"none\";\n\t\tstopButton.style.display = \"flex\";\n\t\tstopButtonPaused.style.display = \"none\";\n\t});\n</script>\n\n<div class=\"controls\">\n\t<div class=\"wrapper\">\n\t\t<button\n\t\t\tid=\"record\"\n\t\t\tclass=\"record-button\"\n\t\t\ton:click={() => record.startRecording()}>{i18n(\"audio.record\")}</button\n\t\t>\n\n\t\t<button\n\t\t\tid=\"stop\"\n\t\t\tclass=\"stop-button {record.isPaused() ? 'stop-button-paused' : ''}\"\n\t\t\ton:click={() => {\n\t\t\t\tif (record.isPaused()) {\n\t\t\t\t\trecord.resumeRecording();\n\t\t\t\t\trecord.stopRecording();\n\t\t\t\t}\n\n\t\t\t\trecord.stopRecording();\n\t\t\t}}>{i18n(\"audio.stop\")}</button\n\t\t>\n\n\t\t<button\n\t\t\tid=\"stop-paused\"\n\t\t\tclass=\"stop-button-paused\"\n\t\t\ton:click={() => {\n\t\t\t\tif (record.isPaused()) {\n\t\t\t\t\trecord.resumeRecording();\n\t\t\t\t\trecord.stopRecording();\n\t\t\t\t}\n\n\t\t\t\trecord.stopRecording();\n\t\t\t}}>{i18n(\"audio.stop\")}</button\n\t\t>\n\n\t\t<button\n\t\t\tid=\"pause\"\n\t\t\tclass=\"pause-button\"\n\t\t\ton:click={() => record.pauseRecording()}><Pause /></button\n\t\t>\n\t\t<button\n\t\t\tid=\"resume\"\n\t\t\tclass=\"resume-button\"\n\t\t\ton:click={() => record.resumeRecording()}>{i18n(\"audio.resume\")}</button\n\t\t>\n\t</div>\n\n\t<select\n\t\tid=\"mic-select\"\n\t\taria-label=\"Select input device\"\n\t\tdisabled={micDevices.length === 0}\n\t>\n\t\t{#if micDevices.length === 0}\n\t\t\t<option value=\"\">{i18n(\"audio.no_microphone\")}</option>\n\t\t{:else}\n\t\t\t{#each micDevices as micDevice}\n\t\t\t\t<option value={micDevice.deviceId}>{micDevice.label}</option>\n\t\t\t{/each}\n\t\t{/if}\n\t</select>\n</div>\n\n<style>\n\t#mic-select {\n\t\theight: var(--size-8);\n\t\tbackground: var(--block-background-fill);\n\t\tpadding: 0px var(--spacing-xxl);\n\t\tborder-radius: var(--radius-full);\n\t\tfont-size: var(--text-md);\n\t\tborder: 1px solid var(--neutral-400);\n\t}\n\t.controls {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: space-between;\n\t\tflex-wrap: wrap;\n\t\toverflow: hidden;\n\t}\n\n\t.controls select {\n\t\ttext-overflow: ellipsis;\n\t\tmargin: var(--size-2) 0;\n\t}\n\n\t@media (max-width: 375px) {\n\t\t.controls select {\n\t\t\twidth: 100%;\n\t\t}\n\t}\n\n\t.wrapper {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t}\n\n\t#record {\n\t\tmargin-right: var(--spacing-md);\n\t}\n\n\t.stop-button-paused {\n\t\tdisplay: none;\n\t\theight: var(--size-8);\n\t\twidth: var(--size-20);\n\t\tbackground-color: var(--block-background-fill);\n\t\tborder-radius: var(--radius-3xl);\n\t\talign-items: center;\n\t\tborder: 1px solid var(--neutral-400);\n\t\tmargin-right: 5px;\n\t}\n\n\t.stop-button-paused::before {\n\t\tcontent: \"\";\n\t\theight: var(--size-4);\n\t\twidth: var(--size-4);\n\t\tborder-radius: var(--radius-full);\n\t\tbackground: var(--primary-600);\n\t\tmargin: 0 var(--spacing-xl);\n\t}\n\t.stop-button::before {\n\t\tcontent: \"\";\n\t\theight: var(--size-4);\n\t\twidth: var(--size-4);\n\t\tborder-radius: var(--radius-full);\n\t\tbackground: var(--primary-600);\n\t\tmargin: 0 var(--spacing-xl);\n\t\tanimation: scaling 1800ms infinite;\n\t}\n\n\t.stop-button {\n\t\tdisplay: none;\n\t\theight: var(--size-8);\n\t\twidth: var(--size-20);\n\t\tbackground-color: var(--block-background-fill);\n\t\tborder-radius: var(--radius-3xl);\n\t\talign-items: center;\n\t\tborder: 1px solid var(--primary-600);\n\t\tmargin-right: 5px;\n\t}\n\n\t.record-button::before {\n\t\tcontent: \"\";\n\t\theight: var(--size-4);\n\t\twidth: var(--size-4);\n\t\tborder-radius: var(--radius-full);\n\t\tbackground: var(--primary-600);\n\t\tmargin: 0 var(--spacing-xl);\n\t}\n\n\t.record-button {\n\t\theight: var(--size-8);\n\t\twidth: var(--size-24);\n\t\tbackground-color: var(--block-background-fill);\n\t\tborder-radius: var(--radius-3xl);\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tborder: 1px solid var(--neutral-400);\n\t}\n\n\t.stop-button:disabled {\n\t\tcursor: not-allowed;\n\t}\n\n\t.record-button:disabled {\n\t\tcursor: not-allowed;\n\t\topacity: 0.5;\n\t}\n\n\t@keyframes scaling {\n\t\t0% {\n\t\t\tbackground-color: var(--primary-600);\n\t\t\tscale: 1;\n\t\t}\n\t\t50% {\n\t\t\tbackground-color: var(--primary-600);\n\t\t\tscale: 1.2;\n\t\t}\n\t\t100% {\n\t\t\tbackground-color: var(--primary-600);\n\t\t\tscale: 1;\n\t\t}\n\t}\n\n\t.pause-button {\n\t\tdisplay: none;\n\t\theight: var(--size-8);\n\t\twidth: var(--size-20);\n\t\tborder: 1px solid var(--neutral-400);\n\t\tborder-radius: var(--radius-3xl);\n\t\tpadding: var(--spacing-md);\n\t}\n\n\t.resume-button {\n\t\tdisplay: none;\n\t\theight: var(--size-8);\n\t\twidth: var(--size-20);\n\t\tborder: 1px solid var(--neutral-400);\n\t\tborder-radius: var(--radius-3xl);\n\t\tpadding: var(--spacing-xl);\n\t\tline-height: 1px;\n\t\tfont-size: var(--text-md);\n\t}\n\n\t:global(::part(region)) {\n\t\tborder-radius: var(--radius-md);\n\t\theight: 98% !important;\n\t\tborder: 1px solid var(--color-accent);\n\t\tborder-width: 1px 3px;\n\t}\n\n\t:global(::part(region-handle)) {\n\t\twidth: 5px !important;\n\t\tborder: none;\n\t}\n</style>\n","<script lang=\"ts\">\n\timport { onMount } from \"svelte\";\n\timport type { I18nFormatter } from \"@gradio/utils\";\n\timport WaveSurfer from \"wavesurfer.js\";\n\timport { skipAudio, process_audio } from \"../shared/utils\";\n\timport Record from \"wavesurfer.js/dist/plugins/record.js\";\n\timport WaveformControls from \"../shared/WaveformControls.svelte\";\n\timport WaveformRecordControls from \"../shared/WaveformRecordControls.svelte\";\n\timport RecordPlugin from \"wavesurfer.js/dist/plugins/record.js\";\n\n\texport let mode: string;\n\texport let i18n: I18nFormatter;\n\texport let dispatch: (event: any, detail?: any) => void;\n\texport let dispatch_blob: (\n\t\tblobs: Uint8Array[] | Blob[],\n\t\tevent: \"stream\" | \"change\" | \"stop_recording\"\n\t) => Promise<void> | undefined;\n\texport let waveform_settings = {};\n\texport let handle_reset_value: () => void;\n\n\tlet micWaveform: WaveSurfer;\n\tlet recordingWaveform: WaveSurfer;\n\tlet playing = false;\n\tlet container: HTMLDivElement;\n\n\tlet record: Record;\n\tlet recordedAudio: string | null = null;\n\n\t// timestamps\n\tlet timeRef: HTMLTimeElement;\n\tlet durationRef: HTMLTimeElement;\n\tlet audioDuration: number;\n\tlet seconds = 0;\n\tlet interval: NodeJS.Timeout;\n\tlet timing = false;\n\t// trimming\n\tlet trimDuration = 0;\n\n\tconst start_interval = (): void => {\n\t\tclearInterval(interval);\n\t\tinterval = setInterval(() => {\n\t\t\tseconds++;\n\t\t}, 1000);\n\t};\n\n\tconst format_time = (seconds: number): string => {\n\t\tconst minutes = Math.floor(seconds / 60);\n\t\tconst secondsRemainder = Math.round(seconds) % 60;\n\t\tconst paddedSeconds = `0${secondsRemainder}`.slice(-2);\n\t\treturn `${minutes}:${paddedSeconds}`;\n\t};\n\n\t$: record?.on(\"record-start\", () => {\n\t\tstart_interval();\n\t\ttiming = true;\n\t\tdispatch(\"start_recording\");\n\t\tlet waveformCanvas = document.getElementById(\"microphone\");\n\t\tif (waveformCanvas) waveformCanvas.style.display = \"block\";\n\t});\n\n\t$: record?.on(\"record-end\", async (blob) => {\n\t\tseconds = 0;\n\t\ttiming = false;\n\t\tclearInterval(interval);\n\t\tdispatch(\"stop_recording\");\n\t\tconst array_buffer = await blob.arrayBuffer();\n\t\tconst context = new AudioContext();\n\t\tconst audio_buffer = await context.decodeAudioData(array_buffer);\n\n\t\tif (audio_buffer)\n\t\t\tawait process_audio(audio_buffer).then(\n\t\t\t\tasync (trimmedBlob: Uint8Array) => {\n\t\t\t\t\tawait dispatch_blob([trimmedBlob], \"change\");\n\t\t\t\t}\n\t\t\t);\n\t});\n\n\t$: record?.on(\"record-pause\", () => {\n\t\tdispatch(\"pause_recording\");\n\t\tclearInterval(interval);\n\t});\n\n\t$: record?.on(\"record-resume\", () => {\n\t\tstart_interval();\n\t});\n\n\t$: recordingWaveform?.on(\"decode\", (duration: any) => {\n\t\taudioDuration = duration;\n\t\tdurationRef && (durationRef.textContent = format_time(duration));\n\t});\n\n\t$: recordingWaveform?.on(\n\t\t\"timeupdate\",\n\t\t(currentTime: any) =>\n\t\t\ttimeRef && (timeRef.textContent = format_time(currentTime))\n\t);\n\n\t$: recordingWaveform?.on(\"pause\", () => {\n\t\tdispatch(\"pause\");\n\t\tplaying = false;\n\t});\n\n\t$: recordingWaveform?.on(\"play\", () => {\n\t\tdispatch(\"play\");\n\t\tplaying = true;\n\t});\n\n\t$: recordingWaveform?.on(\"finish\", () => {\n\t\tdispatch(\"stop\");\n\t\tdispatch(\"end\");\n\t\tplaying = false;\n\t});\n\n\tconst create_mic_waveform = (): void => {\n\t\tconst recorder = document.getElementById(\"microphone\");\n\t\tif (recorder) recorder.innerHTML = \"\";\n\t\tif (micWaveform !== undefined) micWaveform.destroy();\n\t\tif (!recorder) return;\n\t\tmicWaveform = WaveSurfer.create({\n\t\t\t...waveform_settings,\n\t\t\tcontainer: recorder\n\t\t});\n\n\t\trecord = micWaveform.registerPlugin(RecordPlugin.create());\n\t\trecord.startMic();\n\t};\n\n\tconst create_recording_waveform = (): void => {\n\t\tlet recording = document.getElementById(\"recording\");\n\t\tif (!recordedAudio || !recording) return;\n\t\trecordingWaveform = WaveSurfer.create({\n\t\t\tcontainer: recording,\n\t\t\turl: recordedAudio,\n\t\t\t...waveform_settings\n\t\t});\n\t};\n\n\t$: record?.on(\"record-end\", (blob) => {\n\t\trecordedAudio = URL.createObjectURL(blob);\n\n\t\tconst microphone = document.getElementById(\"microphone\");\n\t\tconst recording = document.getElementById(\"recording\");\n\n\t\tif (microphone) microphone.style.display = \"none\";\n\t\tif (recording && recordedAudio) {\n\t\t\trecording.innerHTML = \"\";\n\t\t\tcreate_recording_waveform();\n\t\t}\n\t});\n\n\tconst handle_trim_audio = async (\n\t\tstart: number,\n\t\tend: number\n\t): Promise<void> => {\n\t\tmode = \"edit\";\n\t\tconst decodedData = recordingWaveform.getDecodedData();\n\t\tif (decodedData)\n\t\t\tawait process_audio(decodedData, start, end).then(\n\t\t\t\tasync (trimmedAudio: Uint8Array) => {\n\t\t\t\t\tawait dispatch_blob([trimmedAudio], \"change\");\n\t\t\t\t\trecordingWaveform.destroy();\n\t\t\t\t\tcreate_recording_waveform();\n\t\t\t\t}\n\t\t\t);\n\t\tdispatch(\"edit\");\n\t};\n\n\tonMount(() => {\n\t\tcreate_mic_waveform();\n\n\t\twindow.addEventListener(\"keydown\", (e) => {\n\t\t\tif (e.key === \"ArrowRight\") {\n\t\t\t\tskipAudio(recordingWaveform, 0.1);\n\t\t\t} else if (e.key === \"ArrowLeft\") {\n\t\t\t\tskipAudio(recordingWaveform, -0.1);\n\t\t\t}\n\t\t});\n\t});\n</script>\n\n<div class=\"component-wrapper\">\n\t<div id=\"microphone\" data-testid=\"microphone-waveform\" />\n\t<div id=\"recording\" bind:this={container} />\n\n\t{#if timing || recordedAudio}\n\t\t<div id=\"timestamps\">\n\t\t\t<time bind:this={timeRef} id=\"time\">0:00</time>\n\t\t\t<div>\n\t\t\t\t{#if mode === \"edit\" && trimDuration > 0}\n\t\t\t\t\t<time id=\"trim-duration\">{format_time(trimDuration)}</time>\n\t\t\t\t{/if}\n\t\t\t\t{#if timing}\n\t\t\t\t\t<time id=\"duration\">{format_time(seconds)}</time>\n\t\t\t\t{:else}\n\t\t\t\t\t<time bind:this={durationRef} id=\"duration\">0:00</time>\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t</div>\n\t{/if}\n\n\t{#if micWaveform && !recordedAudio}\n\t\t<WaveformRecordControls bind:record {i18n} {dispatch} />\n\t{/if}\n\n\t{#if recordingWaveform && recordedAudio}\n\t\t<WaveformControls\n\t\t\tbind:waveform={recordingWaveform}\n\t\t\t{container}\n\t\t\t{playing}\n\t\t\t{audioDuration}\n\t\t\t{i18n}\n\t\t\tinteractive={true}\n\t\t\t{handle_trim_audio}\n\t\t\tbind:trimDuration\n\t\t\tbind:mode\n\t\t\tshowRedo\n\t\t\t{handle_reset_value}\n\t\t\t{waveform_settings}\n\t\t/>\n\t{/if}\n</div>\n\n<style>\n\t#microphone {\n\t\twidth: 100%;\n\t\tdisplay: none;\n\t}\n\n\t.component-wrapper {\n\t\tpadding: var(--size-3);\n\t}\n\n\t#timestamps {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\twidth: 100%;\n\t\tpadding: var(--size-1) 0;\n\t\tmargin: var(--spacing-md) 0;\n\t}\n\n\t#time {\n\t\tcolor: var(--neutral-400);\n\t}\n\n\t#duration {\n\t\tcolor: var(--neutral-400);\n\t}\n\n\t#trim-duration {\n\t\tcolor: var(--color-accent);\n\t\tmargin-right: var(--spacing-sm);\n\t}\n</style>\n","<script lang=\"ts\">\n\timport { onMount } from \"svelte\";\n\timport type { I18nFormatter } from \"@gradio/utils\";\n\timport WaveSurfer from \"wavesurfer.js\";\n\timport RecordPlugin from \"wavesurfer.js/dist/plugins/record.js\";\n\n\texport let recording = false;\n\texport let paused_recording = false;\n\texport let stop: () => void;\n\texport let record: () => void;\n\texport let i18n: I18nFormatter;\n\texport let waveform_settings = {};\n\n\tlet micWaveform: WaveSurfer;\n\tlet waveformRecord: RecordPlugin;\n\n\tonMount(() => {\n\t\tcreate_mic_waveform();\n\t});\n\n\tconst create_mic_waveform = (): void => {\n\t\tif (micWaveform !== undefined) micWaveform.destroy();\n\n\t\tmicWaveform = WaveSurfer.create({\n\t\t\t...waveform_settings,\n\t\t\theight: 100,\n\t\t\tcontainer: \"#microphone\"\n\t\t});\n\n\t\twaveformRecord = micWaveform.registerPlugin(RecordPlugin.create());\n\t};\n</script>\n\n<div class=\"mic-wrap\">\n\t<div id=\"microphone\" style:display={recording ? \"block\" : \"none\"} />\n\t{#if recording}\n\t\t<button\n\t\t\tclass={paused_recording ? \"stop-button-paused\" : \"stop-button\"}\n\t\t\ton:click={() => {\n\t\t\t\twaveformRecord.stopMic();\n\t\t\t\tstop();\n\t\t\t}}\n\t\t>\n\t\t\t<span class=\"record-icon\">\n\t\t\t\t<span class=\"pinger\" />\n\t\t\t\t<span class=\"dot\" />\n\t\t\t</span>\n\t\t\t{paused_recording ? i18n(\"audio.pause\") : i18n(\"audio.stop\")}\n\t\t</button>\n\t{:else}\n\t\t<button\n\t\t\tclass=\"record-button\"\n\t\t\ton:click={() => {\n\t\t\t\twaveformRecord.startMic();\n\t\t\t\trecord();\n\t\t\t}}\n\t\t>\n\t\t\t<span class=\"record-icon\">\n\t\t\t\t<span class=\"dot\" />\n\t\t\t</span>\n\t\t\t{i18n(\"audio.record\")}\n\t\t</button>\n\t{/if}\n</div>\n\n<style>\n\t.mic-wrap {\n\t\tdisplay: block;\n\t\talign-items: center;\n\t\tmargin: var(--spacing-xl);\n\t}\n\n\t.stop-button-paused {\n\t\tdisplay: none;\n\t\theight: var(--size-8);\n\t\twidth: var(--size-20);\n\t\tbackground-color: var(--block-background-fill);\n\t\tborder-radius: var(--radius-3xl);\n\t\talign-items: center;\n\t\tborder: 1px solid var(--neutral-400);\n\t\tmargin-right: 5px;\n\t}\n\n\t.stop-button-paused::before {\n\t\tcontent: \"\";\n\t\theight: var(--size-4);\n\t\twidth: var(--size-4);\n\t\tborder-radius: var(--radius-full);\n\t\tbackground: var(--primary-600);\n\t\tmargin: 0 var(--spacing-xl);\n\t}\n\n\t.stop-button::before {\n\t\tcontent: \"\";\n\t\theight: var(--size-4);\n\t\twidth: var(--size-4);\n\t\tborder-radius: var(--radius-full);\n\t\tbackground: var(--primary-600);\n\t\tmargin: 0 var(--spacing-xl);\n\t\tanimation: scaling 1800ms infinite;\n\t}\n\n\t.stop-button {\n\t\theight: var(--size-8);\n\t\twidth: var(--size-20);\n\t\tbackground-color: var(--block-background-fill);\n\t\tborder-radius: var(--radius-3xl);\n\t\talign-items: center;\n\t\tborder: 1px solid var(--primary-600);\n\t\tmargin-right: 5px;\n\t\tdisplay: flex;\n\t}\n\n\t.record-button::before {\n\t\tcontent: \"\";\n\t\theight: var(--size-4);\n\t\twidth: var(--size-4);\n\t\tborder-radius: var(--radius-full);\n\t\tbackground: var(--primary-600);\n\t\tmargin: 0 var(--spacing-xl);\n\t}\n\n\t.record-button {\n\t\theight: var(--size-8);\n\t\twidth: var(--size-24);\n\t\tbackground-color: var(--block-background-fill);\n\t\tborder-radius: var(--radius-3xl);\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tborder: 1px solid var(--neutral-400);\n\t}\n</style>\n","<script lang=\"ts\">\n\timport { onDestroy, createEventDispatcher } from \"svelte\";\n\timport { Upload, ModifyUpload } from \"@gradio/upload\";\n\timport { upload, prepare_files, type FileData } from \"@gradio/client\";\n\timport { BlockLabel } from \"@gradio/atoms\";\n\timport { Music, Microphone, Upload as UploadIcon } from \"@gradio/icons\";\n\timport AudioPlayer from \"../player/AudioPlayer.svelte\";\n\timport { _ } from \"svelte-i18n\";\n\n\timport type { IBlobEvent, IMediaRecorder } from \"extendable-media-recorder\";\n\timport type { I18nFormatter } from \"js/app/src/gradio_helper\";\n\timport AudioRecorder from \"../recorder/AudioRecorder.svelte\";\n\timport StreamAudio from \"../streaming/StreamAudio.svelte\";\n\n\texport let value: null | FileData = null;\n\texport let label: string;\n\texport let root: string;\n\texport let show_label = true;\n\texport let sources:\n\t\t| [\"microphone\"]\n\t\t| [\"upload\"]\n\t\t| [\"microphone\", \"upload\"]\n\t\t| [\"upload\", \"microphone\"] = [\"microphone\", \"upload\"];\n\texport let pending = false;\n\texport let streaming = false;\n\texport let autoplay = false;\n\texport let i18n: I18nFormatter;\n\texport let waveform_settings = {};\n\texport let dragging: boolean;\n\texport let active_source: \"microphone\" | \"upload\";\n\texport let handle_reset_value: () => void = () => {};\n\n\t$: dispatch(\"drag\", dragging);\n\n\t// TODO: make use of this\n\t// export let type: \"normal\" | \"numpy\" = \"normal\";\n\tlet recording = false;\n\tlet recorder: IMediaRecorder;\n\tlet mode = \"\";\n\tlet header: Uint8Array | undefined = undefined;\n\tlet pending_stream: Uint8Array[] = [];\n\tlet submit_pending_stream_on_pending_end = false;\n\tlet inited = false;\n\n\tconst STREAM_TIMESLICE = 500;\n\tconst NUM_HEADER_BYTES = 44;\n\tlet audio_chunks: Blob[] = [];\n\tlet module_promises: [\n\t\tPromise<typeof import(\"extendable-media-recorder\")>,\n\t\tPromise<typeof import(\"extendable-media-recorder-wav-encoder\")>\n\t];\n\n\tfunction get_modules(): void {\n\t\tmodule_promises = [\n\t\t\timport(\"extendable-media-recorder\"),\n\t\t\timport(\"extendable-media-recorder-wav-encoder\")\n\t\t];\n\t}\n\n\tif (streaming) {\n\t\tget_modules();\n\t}\n\n\tconst dispatch = createEventDispatcher<{\n\t\tchange: FileData | null;\n\t\tstream: FileData;\n\t\tedit: never;\n\t\tplay: never;\n\t\tpause: never;\n\t\tstop: never;\n\t\tend: never;\n\t\tdrag: boolean;\n\t\terror: string;\n\t\tupload: FileData;\n\t\tclear: undefined;\n\t\tstart_recording: undefined;\n\t\tpause_recording: undefined;\n\t\tstop_recording: undefined;\n\t}>();\n\n\tconst dispatch_blob = async (\n\t\tblobs: Uint8Array[] | Blob[],\n\t\tevent: \"stream\" | \"change\" | \"stop_recording\"\n\t): Promise<void> => {\n\t\tlet _audio_blob = new File(blobs, \"audio.wav\");\n\t\tconst val = await prepare_files([_audio_blob], event === \"stream\");\n\t\tvalue = ((await upload(val, root))?.filter(Boolean) as FileData[])[0];\n\n\t\tdispatch(event, value);\n\t};\n\n\tonDestroy(() => {\n\t\tif (streaming && recorder && recorder.state !== \"inactive\") {\n\t\t\trecorder.stop();\n\t\t}\n\t});\n\n\tasync function prepare_audio(): Promise<void> {\n\t\tlet stream: MediaStream | null;\n\n\t\ttry {\n\t\t\tstream = await navigator.mediaDevices.getUserMedia({ audio: true });\n\t\t} catch (err) {\n\t\t\tif (!navigator.mediaDevices) {\n\t\t\t\tdispatch(\"error\", i18n(\"audio.no_device_support\"));\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (err instanceof DOMException && err.name == \"NotAllowedError\") {\n\t\t\t\tdispatch(\"error\", i18n(\"audio.allow_recording_access\"));\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthrow err;\n\t\t}\n\t\tif (stream == null) return;\n\t\tif (streaming) {\n\t\t\tconst [{ MediaRecorder, register }, { connect }] = await Promise.all(\n\t\t\t\tmodule_promises\n\t\t\t);\n\t\t\tawait register(await connect());\n\t\t\trecorder = new MediaRecorder(stream, { mimeType: \"audio/wav\" });\n\t\t\trecorder.addEventListener(\"dataavailable\", handle_chunk);\n\t\t} else {\n\t\t\trecorder = new MediaRecorder(stream);\n\t\t\trecorder.addEventListener(\"dataavailable\", (event) => {\n\t\t\t\taudio_chunks.push(event.data);\n\t\t\t});\n\t\t\trecorder.addEventListener(\"stop\", async () => {\n\t\t\t\trecording = false;\n\t\t\t\tawait dispatch_blob(audio_chunks, \"change\");\n\t\t\t\tawait dispatch_blob(audio_chunks, \"stop_recording\");\n\t\t\t\taudio_chunks = [];\n\t\t\t});\n\t\t}\n\t\tinited = true;\n\t}\n\n\tasync function handle_chunk(event: IBlobEvent): Promise<void> {\n\t\tlet buffer = await event.data.arrayBuffer();\n\t\tlet payload = new Uint8Array(buffer);\n\t\tif (!header) {\n\t\t\theader = new Uint8Array(buffer.slice(0, NUM_HEADER_BYTES));\n\t\t\tpayload = new Uint8Array(buffer.slice(NUM_HEADER_BYTES));\n\t\t}\n\t\tif (pending) {\n\t\t\tpending_stream.push(payload);\n\t\t} else {\n\t\t\tlet blobParts = [header].concat(pending_stream, [payload]);\n\t\t\tdispatch_blob(blobParts, \"stream\");\n\t\t\tpending_stream = [];\n\t\t}\n\t}\n\n\t$: if (submit_pending_stream_on_pending_end && pending === false) {\n\t\tsubmit_pending_stream_on_pending_end = false;\n\t\tif (header && pending_stream) {\n\t\t\tlet blobParts: Uint8Array[] = [header].concat(pending_stream);\n\t\t\tpending_stream = [];\n\t\t\tdispatch_blob(blobParts, \"stream\");\n\t\t}\n\t}\n\n\tasync function record(): Promise<void> {\n\t\trecording = true;\n\t\tdispatch(\"start_recording\");\n\t\tif (!inited) await prepare_audio();\n\t\theader = undefined;\n\t\tif (streaming) {\n\t\t\trecorder.start(STREAM_TIMESLICE);\n\t\t}\n\t}\n\n\tfunction clear(): void {\n\t\tdispatch(\"change\", null);\n\t\tdispatch(\"clear\");\n\t\tmode = \"\";\n\t\tvalue = null;\n\t}\n\n\tfunction handle_load({ detail }: { detail: FileData }): void {\n\t\tvalue = detail;\n\t\tdispatch(\"change\", detail);\n\t\tdispatch(\"upload\", detail);\n\t}\n\n\tfunction stop(): void {\n\t\trecording = false;\n\n\t\tif (streaming) {\n\t\t\tdispatch(\"stop_recording\");\n\t\t\trecorder.stop();\n\t\t\tif (pending) {\n\t\t\t\tsubmit_pending_stream_on_pending_end = true;\n\t\t\t}\n\t\t\tdispatch_blob(audio_chunks, \"change\");\n\t\t\tdispatch(\"clear\");\n\t\t\tmode = \"\";\n\t\t}\n\t}\n</script>\n\n<BlockLabel\n\t{show_label}\n\tIcon={Music}\n\tfloat={active_source === \"upload\" && value === null}\n\tlabel={label || i18n(\"audio.audio\")}\n/>\n{#if value === null || streaming}\n\t{#if active_source === \"microphone\"}\n\t\t<ModifyUpload {i18n} on:clear={clear} absolute={true} />\n\t\t{#if streaming}\n\t\t\t<StreamAudio {record} {recording} {stop} {i18n} {waveform_settings} />\n\t\t{:else}\n\t\t\t<AudioRecorder\n\t\t\t\tbind:mode\n\t\t\t\t{i18n}\n\t\t\t\t{dispatch}\n\t\t\t\t{dispatch_blob}\n\t\t\t\t{waveform_settings}\n\t\t\t\t{handle_reset_value}\n\t\t\t/>\n\t\t{/if}\n\t{:else if active_source === \"upload\"}\n\t\t<ModifyUpload {i18n} on:clear={clear} absolute={true} />\n\t\t<!-- explicitly listed out audio mimetypes due to iOS bug not recognizing audio/* -->\n\t\t<Upload\n\t\t\tfiletype=\"audio/aac,audio/midi,audio/mpeg,audio/ogg,audio/wav,audio/x-wav,audio/opus,audio/webm,audio/flac,audio/vnd.rn-realaudio,audio/x-ms-wma,audio/x-aiff,audio/amr,audio/*\"\n\t\t\ton:load={handle_load}\n\t\t\tbind:dragging\n\t\t\t{root}\n\t\t>\n\t\t\t<slot />\n\t\t</Upload>\n\t{/if}\n{:else}\n\t<ModifyUpload\n\t\t{i18n}\n\t\ton:clear={clear}\n\t\ton:edit={() => (mode = \"edit\")}\n\t\tabsolute={true}\n\t/>\n\n\t<AudioPlayer\n\t\tbind:mode\n\t\t{value}\n\t\t{label}\n\t\t{autoplay}\n\t\t{i18n}\n\t\t{dispatch}\n\t\t{dispatch_blob}\n\t\t{waveform_settings}\n\t\t{handle_reset_value}\n\t\tinteractive\n\t/>\n{/if}\n\n{#if sources.length > 1}\n\t<span class=\"source-selection\">\n\t\t<button\n\t\t\tclass=\"icon\"\n\t\t\taria-label=\"Upload audio\"\n\t\t\ton:click={() => {\n\t\t\t\tclear();\n\t\t\t\tactive_source = \"upload\";\n\t\t\t}}><UploadIcon /></button\n\t\t>\n\t\t<button\n\t\t\tclass=\"icon\"\n\t\t\taria-label=\"Record audio\"\n\t\t\ton:click={() => {\n\t\t\t\tclear();\n\t\t\t\tactive_source = \"microphone\";\n\t\t\t}}><Microphone /></button\n\t\t>\n\t</span>\n{/if}\n\n<style>\n\t.source-selection {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tborder-top: 1px solid var(--border-color-primary);\n\t\twidth: 95%;\n\t\tmargin: 0 auto;\n\t}\n\n\t.icon {\n\t\twidth: 22px;\n\t\theight: 22px;\n\t\tmargin: var(--spacing-lg) var(--spacing-xs);\n\t\tpadding: var(--spacing-xs);\n\t\tcolor: var(--neutral-400);\n\t\tborder-radius: var(--radius-md);\n\t}\n\n\t.icon:hover,\n\t.icon:focus {\n\t\tcolor: var(--color-accent);\n\t}\n</style>\n","<svelte:options accessors={true} />\n\n<script lang=\"ts\">\n\timport type { Gradio, ShareData } from \"@gradio/utils\";\n\n\timport type { FileData } from \"@gradio/client\";\n\timport type { LoadingStatus } from \"@gradio/statustracker\";\n\n\timport StaticAudio from \"./static/StaticAudio.svelte\";\n\timport InteractiveAudio from \"./interactive/InteractiveAudio.svelte\";\n\timport { StatusTracker } from \"@gradio/statustracker\";\n\timport { Block, UploadText } from \"@gradio/atoms\";\n\timport type { WaveformOptions } from \"./shared/types\";\n\timport { normalise_file } from \"@gradio/client\";\n\n\texport let elem_id = \"\";\n\texport let elem_classes: string[] = [];\n\texport let visible = true;\n\texport let interactive: boolean;\n\texport let value: null | FileData = null;\n\texport let sources:\n\t\t| [\"microphone\"]\n\t\t| [\"upload\"]\n\t\t| [\"microphone\", \"upload\"]\n\t\t| [\"upload\", \"microphone\"];\n\texport let label: string;\n\texport let root: string;\n\texport let show_label: boolean;\n\texport let proxy_url: null | string;\n\texport let container = true;\n\texport let scale: number | null = null;\n\texport let min_width: number | undefined = undefined;\n\texport let loading_status: LoadingStatus;\n\texport let autoplay = false;\n\texport let show_download_button = true;\n\texport let show_share_button = false;\n\texport let waveform_options: WaveformOptions = {};\n\texport let pending: boolean;\n\texport let streaming: boolean;\n\texport let gradio: Gradio<{\n\t\tchange: typeof value;\n\t\tstream: typeof value;\n\t\terror: string;\n\t\tedit: never;\n\t\tplay: never;\n\t\tpause: never;\n\t\tstop: never;\n\t\tend: never;\n\t\tstart_recording: never;\n\t\tpause_recording: never;\n\t\tstop_recording: never;\n\t\tupload: never;\n\t\tclear: never;\n\t\tshare: ShareData;\n\t}>;\n\n\tlet old_value: null | FileData | string = null;\n\tlet _value: null | FileData;\n\t$: _value = normalise_file(value, root, proxy_url);\n\n\tlet active_source: \"microphone\" | \"upload\";\n\n\tlet initial_value: null | FileData = value;\n\n\t$: if (value && initial_value === null) {\n\t\tinitial_value = value;\n\t}\n\n\tconst handle_reset_value = (): void => {\n\t\tif (initial_value === null || value === initial_value) {\n\t\t\treturn;\n\t\t}\n\n\t\tvalue = initial_value;\n\t};\n\n\t$: {\n\t\tif (JSON.stringify(value) !== JSON.stringify(old_value)) {\n\t\t\told_value = value;\n\t\t\tgradio.dispatch(\"change\");\n\t\t}\n\t}\n\n\tlet dragging: boolean;\n\n\t$: if (sources) {\n\t\tactive_source = sources[0];\n\t}\n\n\tconst waveform_settings = {\n\t\theight: 50,\n\t\twaveColor: waveform_options.waveform_color || \"#9ca3af\",\n\t\tprogressColor: waveform_options.waveform_progress_color || \"#f97316\",\n\t\tbarWidth: 2,\n\t\tbarGap: 3,\n\t\tbarHeight: 4,\n\t\tcursorWidth: 2,\n\t\tcursorColor: \"#ddd5e9\",\n\t\tbarRadius: 10,\n\t\tdragToSeek: true,\n\t\tmediaControls: waveform_options.show_controls\n\t};\n</script>\n\n{#if !interactive}\n\t<Block\n\t\tvariant={\"solid\"}\n\t\tborder_mode={dragging ? \"focus\" : \"base\"}\n\t\tpadding={false}\n\t\t{elem_id}\n\t\t{elem_classes}\n\t\t{visible}\n\t\t{container}\n\t\t{scale}\n\t\t{min_width}\n\t>\n\t\t<StatusTracker\n\t\t\tautoscroll={gradio.autoscroll}\n\t\t\ti18n={gradio.i18n}\n\t\t\t{...loading_status}\n\t\t/>\n\n\t\t<StaticAudio\n\t\t\ti18n={gradio.i18n}\n\t\t\t{autoplay}\n\t\t\t{show_label}\n\t\t\t{show_download_button}\n\t\t\t{show_share_button}\n\t\t\tvalue={_value}\n\t\t\t{label}\n\t\t\t{waveform_settings}\n\t\t\ton:share={(e) => gradio.dispatch(\"share\", e.detail)}\n\t\t\ton:error={(e) => gradio.dispatch(\"error\", e.detail)}\n\t\t/>\n\t</Block>\n{:else}\n\t<Block\n\t\tvariant={value === null && active_source === \"upload\" ? \"dashed\" : \"solid\"}\n\t\tborder_mode={dragging ? \"focus\" : \"base\"}\n\t\tpadding={false}\n\t\t{elem_id}\n\t\t{elem_classes}\n\t\t{visible}\n\t\t{container}\n\t\t{scale}\n\t\t{min_width}\n\t>\n\t\t<StatusTracker\n\t\t\tautoscroll={gradio.autoscroll}\n\t\t\ti18n={gradio.i18n}\n\t\t\t{...loading_status}\n\t\t/>\n\t\t<InteractiveAudio\n\t\t\t{label}\n\t\t\t{show_label}\n\t\t\tvalue={_value}\n\t\t\ton:change={({ detail }) => (value = detail)}\n\t\t\ton:stream={({ detail }) => {\n\t\t\t\tvalue = detail;\n\t\t\t\tgradio.dispatch(\"stream\", value);\n\t\t\t}}\n\t\t\ton:drag={({ detail }) => (dragging = detail)}\n\t\t\t{root}\n\t\t\t{sources}\n\t\t\t{active_source}\n\t\t\t{pending}\n\t\t\t{streaming}\n\t\t\t{autoplay}\n\t\t\t{handle_reset_value}\n\t\t\tbind:dragging\n\t\t\ton:edit={() => gradio.dispatch(\"edit\")}\n\t\t\ton:play={() => gradio.dispatch(\"play\")}\n\t\t\ton:pause={() => gradio.dispatch(\"pause\")}\n\t\t\ton:stop={() => gradio.dispatch(\"stop\")}\n\t\t\ton:end={() => gradio.dispatch(\"end\")}\n\t\t\ton:start_recording={() => gradio.dispatch(\"start_recording\")}\n\t\t\ton:pause_recording={() => gradio.dispatch(\"pause_recording\")}\n\t\t\ton:stop_recording={() => gradio.dispatch(\"stop_recording\")}\n\t\t\ton:upload={() => gradio.dispatch(\"upload\")}\n\t\t\ton:clear={() => gradio.dispatch(\"clear\")}\n\t\t\ton:error={({ detail }) => {\n\t\t\t\tloading_status = loading_status || {};\n\t\t\t\tloading_status.status = \"error\";\n\t\t\t\tgradio.dispatch(\"error\", detail);\n\t\t\t}}\n\t\t\ti18n={gradio.i18n}\n\t\t\t{waveform_settings}\n\t\t>\n\t\t\t<UploadText i18n={gradio.i18n} type=\"audio\" />\n\t\t</InteractiveAudio>\n\t</Block>\n{/if}\n"],"file":"assets/index-fef9d5f8.js"}